<Window x:Class="DoAnLTUDQL1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DoAnLTUDQL1"
        mc:Ignorable="d"
                xmlns:chart="clr-namespace:De.TorstenMandelkow.MetroChart;assembly=De.TorstenMandelkow.MetroChart"
                xmlns:provider="clr-namespace:DoAnLTUDQL1.DataProvider"
                xmlns:converter="clr-namespace:DoAnLTUDQL1.Converter"
                xmlns:v="clr-namespace:DoAnLTUDQL1.MyValidation"
                xmlns:m="clr-namespace:DoAnLTUDQL1.Model" xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="My NetFlix" Height="800" Width="1200" RenderTransformOrigin="0.5,0.5" WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True" ResizeMode="CanResize" Topmost="False">
    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Open" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed" />
        <CommandBinding x:Name="MaximizeCommand" Command="SystemCommands.MaximizeWindowCommand" CanExecute="MaximizeCommand_CanExecute" Executed="MaximizeCommand_Executed"/>
        <CommandBinding x:Name="MinimizeCommand" Command="SystemCommands.MinimizeWindowCommand" CanExecute="MinimizeCommand_CanExecute" Executed="MinimizeCommand_Executed"/>
        <CommandBinding x:Name="RestoreCommand" Command="SystemCommands.RestoreWindowCommand" CanExecute="RestoreCommand_CanExecute" Executed="RestoreCommand_Executed"/>
        <CommandBinding x:Name="CloseCommand" Command="SystemCommands.CloseWindowCommand" CanExecute="CloseCommand_CanExecute" Executed="CloseCommand_Executed"/>
    </Window.CommandBindings>
    <Window.Resources>
        <provider:DBVideo4Search x:Key="DBVideo4Search"/>
        <provider:DBUser4Search x:Key="DBUser4Search"/>
        <provider:MainFormProvider x:Key="mainformprovider"/>
        <converter:MarkUpPassword x:Key="MarkUpPassword"/>
        <converter:IsOnPlayListConvert x:Key="IsOnPlayListConvert"/>
        <converter:ObjectEqualsConverter x:Key="ObjectEqualsConverter"/>
        <converter:ObjectEmpty x:Key="objectempty"/>
        <converter:BorderDetailWidth x:Key="borderdetailwidth"/>
        <converter:ImageDetailWidth x:Key="imagedetailwidth"/>
        <converter:GridDetailHeight x:Key="griddetailheight"/>
        <converter:AdminFunctionVisibility x:Key="AdminFunctionVisibility"/>
        <converter:ThoiHanConvert x:Key="ThoiHanConvert"/>
        <converter:TenCapDoConvert x:Key="TenCapDoConvert"/>
        <converter:PaidOrNot x:Key="PaidOrNot" />
        <!--Style cho button-->

        <Style x:Key="btnManage" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Red"/>
            <Setter Property="BorderThickness" Value="1,2,2,1"/>
            <Setter Property="Foreground" Value="WhiteSmoke"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Foreground" Value="Red"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="btnstyle" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Background" Value="Black"/>
        </Style>

        <Style BasedOn="{StaticResource btnstyle}" TargetType="Button" x:Key="btnstyle2">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Height="50" >
                            <ContentPresenter Margin="10"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=User.Name}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="Red"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Visibility" Value="Collapsed"/>
        </Style>

        <Style TargetType="Button" BasedOn="{StaticResource btnstyle}" x:Key="btnUser">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <StackPanel Background="{TemplateBinding Background}" Orientation="Horizontal" Margin="3">
                            <Border Name="bd" BorderBrush="Gray" BorderThickness="1" VerticalAlignment="Center" HorizontalAlignment="Left" Height="50" Width="8" Background="Gray"/>
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Right" Margin="20,10"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=User.isCheckLoai}" Value="1">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="Red" TargetName="bd"/>
                                <Setter Property="Foreground" Value="Red"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="btn" TargetType="Button">
            <StackPanel Orientation="Horizontal">
                <Image Source="https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX5621738.jpg" Stretch="Fill" Height="20" Margin="5"/>
                <TextBlock Name="tb" VerticalAlignment="Center">
                    <ContentPresenter  Name="content" VerticalAlignment="Center" HorizontalAlignment="Center" />
                </TextBlock>
                <Path Data="M 0,0 L 10,5 L 0,10 L 0,8 L 6,5 L 0,2" Stretch="Fill" Fill="White" Margin="10" Height="20"
                        VerticalAlignment="Center" HorizontalAlignment="Center">
                </Path>
            </StackPanel>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="tb" Property="TextDecorations" Value="Underline"/>
                    <Setter Property="Background" Value="Red"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="btnstyleDNDK" TargetType="Button">
            <Border Background="{TemplateBinding Background}">
                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Background" Value="{x:Null}"/>
                    <Setter Property="Foreground" Value="Red"/>
                    <Setter Property="Opacity" Value="1"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>


        <!--Template cho button Search-->
        <ControlTemplate x:Key="btnsearch" TargetType="Button">
            <StackPanel VerticalAlignment="Center" Orientation="Horizontal" HorizontalAlignment="Right" Name="stsearch"  Opacity="0.6" 
                        Background="{TemplateBinding Background}" >
                <ContentPresenter/>
            </StackPanel>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="stsearch" Property="Opacity" Value="1"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <ControlTemplate x:Key="btnhome" TargetType="Button">
            <Grid>
                <Image Source="C:\\ltudql1_17ck3_17\Images\mylogo.png" Stretch="Fill" Height="60" Width="120"/>
            </Grid>
        </ControlTemplate>
        <!--Template button PreForm-->
        <ControlTemplate TargetType="Button" x:Key="btnPreForm">
            <Grid Name="g" Opacity="0.4">
                <Path Data="M 10,0 L 0,10 L 10,20 L 10,16 L 4,10 L 10,4" Stretch="Fill" Fill="Black"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Height="70" Width="40">
                    <Path.Effect>
                        <BlurEffect Radius="15"/>
                    </Path.Effect>
                </Path>
                <Path Data="M 10,0 L 0,10 L 10,20 L 10,16 L 4,10 L 10,4" Stretch="Fill" Fill="WhiteSmoke"
                        VerticalAlignment="Center" HorizontalAlignment="Center" Height="70" Width="40">
                </Path>
            </Grid>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=PreviousForm.Count}" Value="0">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="g" Property="Opacity" Value="0.6"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--DataGrid-->
        <Style x:Key="dtgheaderstyle" TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Background" Value="#FF3D1C1C"/>
            <Setter Property="Foreground" Value="Red"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="dtgCellstyle" TargetType="{x:Type DataGridCell}">
            <Setter Property="Background" Value="Black"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="TextBlock.TextAlignment" Value="Center" />
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>
        <!--RepeatButton-->
        <ControlTemplate x:Key="repeatbuttonleft" TargetType="RepeatButton">
            <Border Name="bd" Background="Black" Width="70" Height="250" Opacity="0.4">
                <Grid>
                    <Path Data="M 10,0 L 0,10 L 10,20 L 10,16 L 4,10 L 10,4" Stretch="Fill" Fill="Black"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Height="70" Width="40">
                        <Path.Effect>
                            <BlurEffect Radius="15"/>
                        </Path.Effect>
                    </Path>
                    <Path Data="M 10,0 L 0,10 L 10,20 L 10,16 L 4,10 L 10,4" Stretch="Fill" Fill="WhiteSmoke"
                        VerticalAlignment="Center" HorizontalAlignment="Center" Height="70" Width="40">
                    </Path>
                </Grid>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="bd" Property="Opacity" Value="0.6"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <ControlTemplate x:Key="repeatbuttonright" TargetType="RepeatButton">
            <Border Name="bd" Background="Black" Opacity="0.4" Height="250" Width="70">
                <Grid>
                    <Path Data="M 0,0 L 10,5 L 0,10 L 0,8 L 6,5 L 0,2" Stretch="Fill" Fill="Black"
                         VerticalAlignment="Center" HorizontalAlignment="Center" Width="40" Height="70">
                        <Path.Effect>
                            <BlurEffect Radius="10"/>
                        </Path.Effect>
                    </Path>
                    <Path Data="M 0,0 L 10,5 L 0,10 L 0,8 L 6,5 L 0,2" Stretch="Fill" Fill="WhiteSmoke"
                        VerticalAlignment="Center" HorizontalAlignment="Center" Width="40" Height="70">
                    </Path>
                </Grid>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="bd" Property="Opacity" Value="0.6"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <ControlTemplate x:Key="scrollviewertemplate" TargetType="ScrollViewer">
            <Grid>
                <ScrollContentPresenter/>
            </Grid>
        </ControlTemplate>

        <!--Itemscontrol slide của Chủ đề-->
        <ControlTemplate x:Key="itemscontrolChude" TargetType="ItemsControl">
            <StackPanel Background="{TemplateBinding Background}">
                <StackPanel Orientation="Horizontal" Margin="10,0">
                    <TextBlock Text="Khám phá theo thể loại" FontSize="20" Foreground="White" />
                    <Separator BorderThickness="1" BorderBrush="White" Width="200" VerticalAlignment="Bottom" />
                </StackPanel>
                <ItemsPresenter Margin="10"/>
            </StackPanel>
        </ControlTemplate>
        <!--Datatemplate cho dữ liệu-->

        <DataTemplate x:Key="theloaitemplate" DataType="{x:Type local:TheLoai}">
            <Grid Name="gridChude" Tag="{Binding}" MouseLeftButtonDown="gridChude_MouseLeftButtonDown">
                <TextBlock Name="tb" Foreground="White" FontSize="15" Text="{Binding Name}" Margin="10"/>
            </Grid>
            <DataTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="tb" Property="Foreground" Value="Violet"/>
                </Trigger>
                <EventTrigger RoutedEvent="MouseLeftButtonDown" ></EventTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Phim}" >
            <Grid MouseLeftButtonDown="gridDataPhim_MouseLeftButtonDown"  Name="gridDataPhim" MaxWidth="300" Height="200" MinWidth="140" Tag="{Binding}"  MouseEnter="MouseEnter_Video" 
                  MouseLeave="MouseLeave_Video"  MaxHeight="300"  RenderTransformOrigin="0.5,0.5" >
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition Height="25"/>
                </Grid.RowDefinitions>
                <Grid.LayoutTransform>
                    <ScaleTransform />
                </Grid.LayoutTransform>
                <Image Source="{Binding Hinh}"  Stretch="Fill"/>
                <MediaElement Name="media" Source="{Binding Trailer}" Visibility="Collapsed" Stretch="Fill" LoadedBehavior="Manual" MediaEnded="media_MediaEnded"/>

                <StackPanel Name="stackDetailMedia" VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="5" Visibility="Collapsed" >
                    <Button Name="btnPlayPhim" Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Left" Click="btnToPlayVideo_Click" >
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Grid Name="grid" Opacity="0.6">
                                    <Ellipse StrokeThickness="2" Stroke="White" Fill="Black" Width="30" Height="30"/>
                                    <Path Name="path" Data="M 11,7 L 22,15 L 11,23 Z" Fill="White"/>
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="grid" Property="Opacity" Value="1"/>
                                        <Setter TargetName="path" Property="Fill" Value="Red"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock FontSize="15" Foreground="White" Text="{Binding Name}" />
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                        <Image Source="C:\\ltudql1_17ck3_17\Icons\clock.jpg" Width="15" Height="15" Stretch="Fill"  Margin="5" />
                        <TextBlock Foreground="White" FontSize="13" Text="{Binding ThoiGian}" VerticalAlignment="Center" Margin="5"/>
                    </StackPanel>
                    <Border BorderBrush="Gray" Background="Transparent" BorderThickness="1" MaxWidth="75" VerticalAlignment="Center" HorizontalAlignment="Left" >
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="IMDB" Foreground="White" Margin="5,3"/>
                            <TextBlock Text="{Binding RatingIMDB}" Margin="5,3" Foreground="White" FontWeight="Bold" FontSize="12"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                <Border Name="border" BorderBrush="White" BorderThickness="4" Opacity="0"/>
                <Path Grid.Row="1" Name="arrow" Data="M 0,5 L 5,10 L 10,5 Z" Stretch="Fill" Fill="White" Margin="5" Width="40" Height="7" Opacity="0"
                        VerticalAlignment="Top" HorizontalAlignment="Center" StrokeThickness="0" Panel.ZIndex="3">
                    <Path.RenderTransform>
                        <TranslateTransform Y="-4.5"/>
                    </Path.RenderTransform>
                </Path>
                <Path Name="heart" Stroke="White" Panel.ZIndex="3" StrokeThickness="1" VerticalAlignment="Top" HorizontalAlignment="Right" Opacity="0.5" Width="100" Height="90" 
        Data="M 60,50 A 5,5 0 0 0 50,60 C 53,62 60,67 60,67 C 60,67 65,65 70,60 A 5,5 0 0 0 60,50" MouseLeftButtonDown="heart_MouseLeftButtonDown" Tag="{Binding .}" >
                    <Path.Fill>
                        <MultiBinding Converter="{StaticResource IsOnPlayListConvert}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                            <Binding Source="{StaticResource mainformprovider}" Path="SelectedProfile" UpdateSourceTrigger="PropertyChanged"/>
                            <Binding Path="ID" />
                            <Binding Path="Name"/>
                        </MultiBinding>
                    </Path.Fill>
                    <Path.RenderTransform>
                        <TranslateTransform Y="-20" X="5"/>
                    </Path.RenderTransform>
                </Path>
            </Grid>
            <DataTemplate.Triggers>
                <Trigger SourceName="heart" Property="IsMouseOver" Value="True">
                    <Setter TargetName="heart" Property="StrokeThickness" Value="3" />
                    <!--<Setter TargetName="heart" Property="Stroke" Value="Red"/>-->
                    <Setter TargetName="heart" Property="Fill" Value="White"/>
                    <Setter TargetName="heart" Property="Opacity" Value="0.8"/>
                </Trigger>
                <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=IsFormCategory,UpdateSourceTrigger=PropertyChanged}" Value="True">
                    <Setter Property="Width" TargetName="gridDataPhim" Value="250"/>
                    <Setter Property="Height" TargetName="gridDataPhim" Value="250"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=SelectedPhim,UpdateSourceTrigger=PropertyChanged}" Value="{x:Null}">
                    <Setter TargetName="gridDataPhim" Property="Opacity" Value="1"/>
                    <Setter TargetName="gridDataPhim" Property="IsEnabled" Value="True"/>
                </DataTrigger>
                <DataTrigger Value="True">
                    <DataTrigger.Binding>
                        <MultiBinding Converter="{StaticResource ObjectEqualsConverter}">
                            <Binding/>
                            <Binding Path="SelectedPhim" Source="{StaticResource mainformprovider}"/>
                        </MultiBinding>
                    </DataTrigger.Binding>
                    <Setter TargetName="gridDataPhim" Property="Opacity" Value="1"/>
                    <Setter TargetName="border" Property="Opacity" Value="1"/>
                    <Setter TargetName="arrow" Property="Opacity" Value="1"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
        <!--Template cho button Chủ đề-->
        <ControlTemplate x:Key="btnchude" TargetType="Button">
            <StackPanel  VerticalAlignment="Top" >
                <StackPanel Orientation="Horizontal" Background="{TemplateBinding Background}" Height="50" HorizontalAlignment="Left">
                    <ContentPresenter VerticalAlignment="Center"/>
                    <Path Name="arrow" Data="M 0,5 L 5,10 L 10,5 L 10,5 L 5,7" Stretch="Fill" Fill="White" Margin="5" Width="25" Height="15"
                        VerticalAlignment="Center" HorizontalAlignment="Right" StrokeThickness="0">
                        <Path.LayoutTransform>
                            <RotateTransform Angle="0"/>
                        </Path.LayoutTransform>
                    </Path>
                </StackPanel>
                <ItemsControl Name="ictrlChude"  HorizontalAlignment="Left" Panel.ZIndex="1000" Grid.Row="1"  Background="#FF251818" Visibility="Collapsed"
                           Width="400" Height="200" Template="{StaticResource itemscontrolChude}" ItemTemplate="{StaticResource theloaitemplate}" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=TheLoai}" >
                    <ItemsControl.RenderTransform>
                        <ScaleTransform />
                    </ItemsControl.RenderTransform>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <UniformGrid Columns="3"></UniformGrid>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="ictrlChude" Property="Visibility" Value="Visible"/>
                </Trigger>
                <EventTrigger  RoutedEvent="MouseEnter" >
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="arrow" Storyboard.TargetProperty="(LayoutTransform).(RotateTransform.Angle)" To="180" Duration="0:0:0.2"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="MouseLeave">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="arrow" Storyboard.TargetProperty="(LayoutTransform).(RotateTransform.Angle)"  Duration="0:0:0.2"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!--ItemsSource phim hot...-->
        <ControlTemplate x:Key="itemsource" TargetType="ItemsControl">
            <Grid Name="grid" MouseEnter="grid_MouseEnter" MouseLeave="grid_MouseLeave" Height="300">
                <Button Style="{StaticResource btnstyle}" Click="btnTieuDePhimHome_Click" DataContext="{TemplateBinding ItemsSource}"
                        Name="btnTieuDePhimHome" Content="{TemplateBinding Tag}" Template="{StaticResource btn}" VerticalAlignment="Top" />
                <ScrollViewer VerticalAlignment="Center" Grid.Row="1" ScrollChanged="scrollviewer_ScrollChanged" Name="scrollviewer" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" 
                              Template="{StaticResource scrollviewertemplate}" >
                    <ItemsPresenter  VerticalAlignment="Center" />
                </ScrollViewer>
                <Grid Grid.Row="1" VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <RepeatButton Name="rbleft" Grid.Column="0" Command="{x:Static ScrollBar.LineLeftCommand}" ClickMode="Hover" CommandTarget="{Binding ElementName=scrollviewer}"
                                  Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" HorizontalAlignment="Left" VerticalAlignment="Center" Template="{StaticResource repeatbuttonleft}"
                                  Visibility="Collapsed">
                        Left
                    </RepeatButton>
                    <RepeatButton Name="rbright" Grid.Column="2" Command="ScrollBar.LineRightCommand"  ClickMode="Hover" CommandTarget="{Binding ElementName=scrollviewer}"
                                  Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" HorizontalAlignment="Right" VerticalAlignment="Center" Template="{StaticResource repeatbuttonright}"
                                  Visibility="Collapsed">Right</RepeatButton>
                </Grid>
                <!--triggers-->
            </Grid>
            <ControlTemplate.Triggers>
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition SourceName="grid" Property="IsMouseOver" Value="True"/>
                        <Condition SourceName="scrollviewer" Property="ComputedHorizontalScrollBarVisibility" Value="Visible"/>
                    </MultiTrigger.Conditions>
                    <MultiTrigger.Setters>
                        <Setter TargetName="rbleft" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="rbright" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="btnTieuDePhimHome" Property="Margin" Value="63,0"/>
                    </MultiTrigger.Setters>
                </MultiTrigger>
                <MultiTrigger >
                    <MultiTrigger.Conditions>
                        <Condition SourceName="grid" Property="IsMouseOver" Value="True"/>
                        <Condition SourceName="scrollviewer" Property="HorizontalOffset" Value="0"/>
                    </MultiTrigger.Conditions>
                    <Setter TargetName="rbleft" Property="Visibility" Value="Collapsed"/>
                    <Setter TargetName="btnTieuDePhimHome" Property="Margin" Value="0"/>
                </MultiTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!---->
        <ControlTemplate x:Key="tabitem" TargetType="TabItem">
            <Grid Background="Black">
                <ContentPresenter Visibility="Collapsed"/>
            </Grid>
        </ControlTemplate>
        <!--Template cho Scrollviewer Home-->
        <DataTemplate x:Key="templatehome" >
            <StackPanel VerticalAlignment="Top" Background="#FF1A1212">
                <StackPanel.Resources>
                    <Style TargetType="ItemsControl">
                        <Setter Property="ItemsPanel">
                            <Setter.Value>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </StackPanel.Resources>
                <ItemsControl Focusable="True" Tag="Phim lẻ" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=PhimLe}" Template="{StaticResource itemsource}" VerticalAlignment="Top" 
                              HorizontalAlignment="Left" Height="280"/>
                <ItemsControl Tag="Phim hot" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=PhimLe}" Template="{StaticResource itemsource}" VerticalAlignment="Center" HorizontalAlignment="Left" Height="280" Margin="10"/>
                <ItemsControl Tag="Phim hot nè" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=PhimHot}" Template="{StaticResource itemsource}" VerticalAlignment="Center" HorizontalAlignment="Left" Height="280" Margin="10"/>
                <ItemsControl Tag="Top Rating IMDB" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=TopRating}" Template="{StaticResource itemsource}" VerticalAlignment="Center" HorizontalAlignment="Left" Height="280" Margin="10"/>
                <ItemsControl Tag="Mới Cập Nhật" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=Newest}" Template="{StaticResource itemsource}" VerticalAlignment="Center" HorizontalAlignment="Left" Height="280" Margin="10"/>
                <Border Name="tempborderdetail" BorderThickness="0" Background="#FF1A1212" Height="605" VerticalAlignment="Center"/>
                <Grid VerticalAlignment="Bottom" Height="325" Background="Black">
                    <Image Source="https://cdn1us.denofgeek.com/sites/denofgeekus/files/2019/04/avengers-endgame-ending-explained.jpg" HorizontalAlignment="Right" Width="500" Stretch="Fill" >
                        <Image.Effect>
                            <BlurEffect Radius="30"/>
                        </Image.Effect>
                    </Image>
                    <Image Source="https://cdn1us.denofgeek.com/sites/denofgeekus/files/2019/04/avengers-endgame-ending-explained.jpg" HorizontalAlignment="Right" Width="500" Stretch="Fill">
                    </Image>
                    <Border Background="Black" HorizontalAlignment="Left" Width="550" Opacity="1">
                        <Border.Effect>
                            <BlurEffect Radius="80"/>
                        </Border.Effect>
                    </Border>
                    <Grid HorizontalAlignment="Left">
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition Height="0.6*"/>
                        </Grid.RowDefinitions>
                        <Border Width="200"  HorizontalAlignment="Left" VerticalAlignment="Top" BorderBrush="Black" BorderThickness="3">
                            <Image Source="C:\\ltudql1_17ck3_17\Images\mylogo.png"  />
                        </Border>
                        <Grid HorizontalAlignment="Center" Grid.RowSpan="2" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Border HorizontalAlignment="Center" VerticalAlignment="Top" BorderBrush="White" BorderThickness="0,0,0,1" Height="40">
                                <TextBlock VerticalAlignment="Center" Text="Danh sách thành viên" FontSize="20" Foreground="White"/>
                            </Border>
                            <TextBlock HorizontalAlignment="Center" VerticalAlignment="Top" Grid.Row="1" Text="1660335: Võ Phong Lưng" Foreground="White"/>
                        </Grid>
                        <Border Grid.Row="2" Width="{Binding ElementName=maingrid,Path=ActualWidth}" VerticalAlignment="Bottom" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Copyright 2019 Phim Learning | All Rights Reserved." Margin="10,10,10,20" Foreground="White" FontSize="15" VerticalAlignment="Center"/>
                        </Border>
                    </Grid>
                </Grid>
            </StackPanel>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=SelectedPhim}" Value="{x:Null}">
                    <Setter TargetName="tempborderdetail" Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
        <!--Template cho Validation Error-->
        <ControlTemplate x:Key="tberrortemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="0.1*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="1" HorizontalAlignment="Right" Foreground="Red" FontWeight="Bold" FontSize="15">*</TextBlock>
                <Border Grid.Column="0" BorderBrush="Red" BorderThickness="2" TextBlock.Foreground="Black" >
                    <AdornedElementPlaceholder Name="a"/>
                </Border>
                <TextBlock VerticalAlignment="Top" Grid.Row="1" Grid.RowSpan="2" Text="{Binding ElementName=a,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}" Foreground="Red"></TextBlock>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="Validation.HasError" Value="True">
                    <Setter Property="ToolTip" Value="{Binding ElementName=a,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Window.Resources>
    <Grid Name="maingrid" AllowDrop="True" Background="Black"  MinHeight="800" MinWidth="1200"
          MouseLeftButtonDown="gridNavbar_MouseLeftButtonDown" MouseLeftButtonUp="gridNavbar_MouseLeftButtonUp" MouseMove="gridNavbar_MouseMove">
        <Grid.Resources>
            <Style TargetType="Button">
                <Setter Property="BorderThickness" Value="0"/>
            </Style>

        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid Grid.RowSpan="2" Panel.ZIndex="2" Name="gridNavbar"  >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="0.8*"/>
                <ColumnDefinition Width="2.5*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button Name="preForm"  Template="{StaticResource btnPreForm}" Visibility="Visible" Width="50" Height="30"/>
            <Button Name="home" Grid.Column="1" Style="{StaticResource btnstyle}" Content="Home" Template="{StaticResource btnhome}" Foreground="Red" Margin="10" Click="home_Click" />
            <Button Name="chude" Grid.Column="2" Grid.RowSpan="2" Grid.ColumnSpan="2" Style="{StaticResource btnstyle}" Margin="10" 
                    Template="{StaticResource btnchude}" Content="CHỦ ĐỀ" Visibility="{Binding Source={StaticResource mainformprovider},Path=SelectedProfile,Converter={StaticResource objectempty}}"/>
            <Button Name="btnsearch" Grid.Column="3" Style="{DynamicResource btnstyle}" Template="{StaticResource btnsearch}" Background="{x:Null}"  HorizontalAlignment="Right"
                    Visibility="{Binding Source={StaticResource mainformprovider},Path=SelectedProfile,Converter={StaticResource objectempty}}"  >
                <StackPanel VerticalAlignment="Center" Orientation="Horizontal" HorizontalAlignment="Right" Name="stsearch" MouseLeftButtonDown="stsearch_MouseLeftButtonDown" Background="{x:Null}" >
                    <Image Focusable="True" Name="imgsearch" Source="C:\\ltudql1_17ck3_17\Icons\search.jpg"
                           Stretch="Fill" Height="35" />
                    <Grid>
                        <TextBox Name="tbsearch"  Background="Black" Foreground="White" BorderBrush="White" FontSize="10" BorderThickness="0,0,0,1" 
                             Width="200" Visibility="Collapsed" Margin="10,5" VerticalAlignment="Center"
                             LostFocus="tbsearch_LostFocus" >
                            <TextBox.LayoutTransform>
                                <ScaleTransform/>
                            </TextBox.LayoutTransform>
                        </TextBox>
                        <TextBlock IsHitTestVisible="False" Margin="10,5" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="White" FontSize="13" Visibility="{Binding ElementName=tbsearch,Path=Visibility}"
                                   Width="{Binding ElementName=tbsearch,Path=ActualWidth}" Text="Tìm kiếm theo tên">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Opacity" Value="0"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ElementName=tbsearch,Path=Text}" Value="">
                                            <Setter Property="Opacity" Value="1"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <Button Name="btnClearSearch" BorderThickness="0" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,10,0,0" FontSize="13" Content="X" Style="{StaticResource btnstyle2}" 
                                    Background="Transparent" Visibility="{Binding ElementName=tbsearch,Path=Visibility}" Click="btnClearSearch_Click"/>
                    </Grid>
                </StackPanel>
            </Button>
            <Button Name="btndangnhap" Content="Đăng nhập" Grid.Column="5"  Margin="10" Style="{StaticResource btnstyle2}"  Click="btndangnhap_Click" />
            <Button Name="btndangky" Content="Đăng ký" Grid.Column="6"  Margin="10" Style="{StaticResource btnstyle2}"  Click="btnDangky_Click" />
            <Button Name="btnUser" Grid.Column="5" Foreground="White" Grid.RowSpan="2" Grid.ColumnSpan="3" Background="Black">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Border VerticalAlignment="Center" Background="Transparent">
                                <Image Margin="20" Source="{Binding Source={StaticResource mainformprovider},Path=SelectedProfile.Hinh}" MaxWidth="100" MaxHeight="40" 
                                   />
                            </Border>
                            <Border Grid.Row="1" Grid.ColumnSpan="2" Background="Black" Height="{Binding ElementName=stack,Path=ActualHeight}" Visibility="{Binding ElementName=stack,Path=Visibility}">
                                <Border.Effect>
                                    <BlurEffect Radius="20"/>
                                </Border.Effect>
                            </Border>
                            <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Background="{TemplateBinding Background}" DataContext="{Binding Source={StaticResource mainformprovider}}" Name="stack" 
                                        HorizontalAlignment="Left"  Visibility="Collapsed"  VerticalAlignment="Top">
                                <StackPanel.Resources>
                                    <Style TargetType="Button" x:Key="btnstyle4">
                                        <Setter Property="Background" Value="#FF251818"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="HorizontalAlignment" Value="Left"/>
                                        <Setter Property="Margin" Value="10"/>
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Foreground" Value="Red"/>
                                                <Setter Property="Background" Value="{x:Null}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Resources>
                                <Button Name="btnThongKeVideo" Content="Thống Kê Phim" Visibility="{Binding Path=User.isCheckLoai,Converter={StaticResource AdminFunctionVisibility},UpdateSourceTrigger=PropertyChanged}" 
                                        BorderBrush="Red" BorderThickness="3,0,0,0" Style="{DynamicResource btnUser}" Click="btnThongKeVideo_Click"/>
                                <Button Name="btnThongKeDT" Content="Thống kê Doanh Thu" Visibility="{Binding Path=User.isCheckLoai,Converter={StaticResource AdminFunctionVisibility},UpdateSourceTrigger=PropertyChanged}" 
                                        BorderBrush="Red" BorderThickness="3,0,0,0" Style="{DynamicResource btnUser}" Click="btnThongKeDT_Click"/>
                                <Button Name="btnManageVideo" Content="Quản lý Phim" Visibility="{Binding Path=User.isCheckLoai,Converter={StaticResource AdminFunctionVisibility},UpdateSourceTrigger=PropertyChanged}" 
                                        BorderBrush="Red" BorderThickness="3,0,0,0" Style="{DynamicResource btnUser}" Click="btnManageVideo_Click"/>
                                <Button Name="btnManageUser" Content="Quản lý Users" Visibility="{Binding Path=User.isCheckLoai,Converter={StaticResource AdminFunctionVisibility},UpdateSourceTrigger=PropertyChanged}"
                                        BorderBrush="Red" BorderThickness="3,0,0,0" Style="{DynamicResource btnUser}" Click="btnManageUser_Click"/>
                                <Button Name="btnManageTheLoai" Content="Quản lý Thể Loại" Visibility="{Binding Path=User.isCheckLoai,Converter={StaticResource AdminFunctionVisibility},UpdateSourceTrigger=PropertyChanged}"
                                        BorderBrush="Red" BorderThickness="3,0,0,0" Style="{DynamicResource btnUser}" Click="btnManageTheLoai_Click"/>
                                <Button Name="btnToChoseProfile" Content="Đổi Profile" Style="{StaticResource btnstyle4}"  Click="btnToChoseProfile_Click"/>
                                <Button Name="btnUserDetailTab" Content="Thông tin chi tiết"  Style="{StaticResource btnstyle4}"  Click="btnUserDetailTab_Click"/>
                                <Button Name="btnProfilePlaylist" Content="Danh sách yêu thích"  Style="{StaticResource btnstyle4}"  Click="btnProfilePlaylist_Click"/>
                                <Button Name="btnXoaProfile" Content="Xóa Profile"  Style="{StaticResource btnstyle4}"  Click="btnXoaProfile_Click"/>
                                <Button Name="btnDangXuat" Content="Đăng xuất" Style="{StaticResource btnstyle4}" Click="btnDangXuat_Click"/>
                            </StackPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=SelectedProfile}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="stack" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <StackPanel Grid.Column="7" Orientation="Horizontal" Background="Transparent" >
                <StackPanel.Resources>
                    <Style TargetType="Button" x:Key="tt">
                        <Setter Property="Background" Value="Black"/>
                        <Setter Property="Foreground" Value="Gray"/>
                        <Setter Property="BorderBrush" Value="Black"/>
                        <Setter Property="Opacity" Value="0.6"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                                        <ContentPresenter/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="Red"/>
                                <Setter Property="Foreground" Value="Black"/>
                                <Setter Property="BorderBrush" Value="Bisque"/>
                                <Setter Property="Opacity" Value="1"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Resources>
                <!--Minimize Button-->
                <Button x:Name="Minimize" Width="70" Height="40" Style="{StaticResource tt}" Command="SystemCommands.MinimizeWindowCommand"
                 CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}">
                    <Grid Width="30" Height="25" Background="Transparent">
                        <Path Data="M9,0 L8,1 8,1 8,1 0,1 0,1 z" Width="9" Height="9" VerticalAlignment="Bottom" HorizontalAlignment="Center"
              Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Button}, Mode=FindAncestor}}" StrokeThickness="2" />
                    </Grid>
                </Button>
                <!--Maximize Button-->
                <Button x:Name="Maximize" Width="70" Height="40" Style="{StaticResource tt}" Command="SystemCommands.MaximizeWindowCommand"
                    CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" >
                    <Grid Width="30" Height="25" Background="Transparent">
                        <Path Data="M0,1 L9,1 L9,8 L0,8 Z" Width="9" Height="8" VerticalAlignment="Center" HorizontalAlignment="Center" 
              Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Button}, Mode=FindAncestor}}" StrokeThickness="2"  />
                    </Grid>
                </Button>

                <!--Restore Button-->
                <Button x:Name="Restore" Visibility="Collapsed" Width="70" Height="40" Style="{StaticResource tt}" Command="SystemCommands.RestoreWindowCommand"
                    CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}">
                    <Grid Width="30" Height="25" UseLayoutRounding="True" RenderTransform="1,0,0,1,.5,.5" Background="Transparent">
                        <Path Data="M2,0 L8,0 L8,6 M0,3 L6,3 M0,2 L6,2 L6,8 L0,8 Z" Width="8" Height="8" VerticalAlignment="Center" HorizontalAlignment="Center"
              Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Button}, Mode=FindAncestor}}" StrokeThickness="1"  />
                    </Grid>
                </Button>
                <!--Close Button-->
                <Button x:Name="Close" Style="{StaticResource tt}"  Command="SystemCommands.CloseWindowCommand" Width="70" Height="40"
                        CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}">
                    <Grid Width="30" Height="25">
                        <Path x:Name="Cross" Data="M0,0 L1,1 M0,1 L1,0" Stretch="Fill" Width="8" Height="8"
              Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Button}, Mode=FindAncestor}}" StrokeThickness="2" />
                    </Grid>
                </Button>
            </StackPanel>
        </Grid>
        <TabControl Name="maintabcontrol" Grid.RowSpan="2" Grid.Row="1" Background="Black" BorderBrush="Black" >
            <TabItem Name="tabHomeForm1" Visibility="Collapsed">
                <Grid>
                    <ScrollViewer Name="maincrollviewer"   ContentTemplate="{StaticResource templatehome}"  >
                    </ScrollViewer>

                </Grid>
            </TabItem>
            <TabItem Name="tabSignIn2" Visibility="Collapsed">
                <Grid Background="#FF251818" >
                    <Border Background="Black" Width="500" Height="500">
                        <Border.Effect>
                            <BlurEffect Radius="30"/>
                        </Border.Effect>
                    </Border>
                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Width="500" Height="500">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.Background>
                            <ImageBrush ImageSource="C:\\ltudql1_17ck3_17\Images\StarSky.jpg" Stretch="Fill"/>
                        </Grid.Background>
                        <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" Text="Đăng nhập" FontSize="30" FontWeight="Bold" Foreground="White" />
                        <Border Grid.Row="1" HorizontalAlignment="Center" BorderBrush="White" BorderThickness="0,0,0,2" >
                            <StackPanel Margin="0" Orientation="Horizontal" HorizontalAlignment="Center" >
                                <Image Opacity="1" Source="C:\\ltudql1_17ck3_17\Icons\m.png" Width="30" Height="30" Margin="0,10,10,10"/>
                                <Grid>
                                    <TextBox Validation.ErrorTemplate="{StaticResource tberrortemplate}" x:Name="tbId" Width="350" Height="30" FontSize="15" Background="Black"   
                                      FontWeight="Bold"   Foreground="White" Opacity="0.5" >
                                        <TextBox.Text>
                                            <Binding Path="Name" UpdateSourceTrigger="LostFocus"   >
                                                <Binding.ValidationRules>
                                                    <v:UsernameValidation length="6" ></v:UsernameValidation>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <TextBlock IsHitTestVisible="False" Width="{Binding ElementName=tbId,Path=ActualWidth}" Height="{Binding ElementName=tbId,Path=ActualHeight}" FontSize="15" FontWeight="Bold"
                                           Foreground="White" Text="Tên Đăng Nhập" Margin="5,7" Padding="3">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Opacity" Value="0"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=tbId,Path=Text}" Value="">
                                                        <Setter Property="Opacity" Value="0.5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                        </Border>
                        <Border Grid.Row="2" HorizontalAlignment="Center" BorderBrush="White" BorderThickness="0,0,0,2" >
                            <StackPanel Margin="0" Orientation="Horizontal" HorizontalAlignment="Center">
                                <Image Width="30" Height="30" Source="C:\\ltudql1_17ck3_17\Icons\l.png" Margin="0,10,10,10" />
                                <Grid>
                                    <PasswordBox  Name="tbPass" Width="350" Height="30" FontSize="15" Margin="5,0"  MouseEnter="tbPass_MouseEnter" MouseLeave="tbPass_MouseLeave" FontWeight="Bold"  
                                              Foreground="White" Background="Black"  Opacity="0.5" m:PasswordBoxAssistant.BindPassword="True" Validation.ErrorTemplate="{StaticResource tberrortemplate}"
                                              m:PasswordBoxAssistant.BoundPassword="{Binding Pasword,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True,ValidatesOnExceptions=True}"/>
                                    <TextBlock  IsHitTestVisible="False"  FontSize="15" Text="Password" Padding="3" Background="{x:Null}" Margin="5,7" FontWeight="Bold" Foreground="Gray" 
                                                Width="{Binding ElementName=tbPass,Path=ActualWidth}" Height="{Binding ElementName=tbPass,Path=ActualHeight}" HorizontalAlignment="Left">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=Pasword}"  Value="" >
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                        </Border>
                        <Button Grid.Row="3" Name="btnSubmitDN" Width="380" Height="30"  Content="Đăng Nhập"  FontSize="20" Background="#FFF15454" Foreground="White" Click="btnSubmitDN_Click"
                BorderBrush="DarkGreen" BorderThickness="1,1,3,3" Opacity="0.9"   MouseEnter="btnSubmitDN_MouseEnter" MouseLeave="btnSubmitDN_MouseLeave" Template="{StaticResource btnstyleDNDK}"/>
                        <Button Name="btnForgot" Grid.Row="4" Background="{x:Null}" Content="Forgot My Password" Template="{StaticResource btnstyleDNDK}" Foreground="White" FontSize="20" Click="btnForgot_Click"/>
                        <Button Name="btnDangky" Grid.Row="5" Background="{x:Null}" Content="Đăng Ký" Template="{StaticResource btnstyleDNDK}" Foreground="White" FontSize="20" VerticalAlignment="Top" Click="btnDangky_Click"/>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem Name="tabForgotPass3" Visibility="Collapsed">
                <Grid Background="#FF251818" >
                    <Border Background="Black" Width="500" Height="500">
                        <Border.Effect>
                            <BlurEffect Radius="30"/>
                        </Border.Effect>
                    </Border>
                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Width="500" Height="500">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.Resources>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontSize" Value="15"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                            <Style TargetType="TextBox">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Height" Value="25"/>
                                <Setter Property="MaxWidth" Value="250"/>
                                <Setter Property="Grid.Column" Value="1"/>
                                <Setter Property="Margin" Value="10"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.Background>
                            <ImageBrush ImageSource="C:\\ltudql1_17ck3_17\Images\StarSky.jpg" Stretch="Fill"/>
                        </Grid.Background>
                        <TextBlock  Grid.ColumnSpan="2" VerticalAlignment="Center" HorizontalAlignment="Center" Text="Lấy lại mật khẩu" FontSize="30" FontWeight="Bold" Foreground="White" />
                        <Border Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" BorderBrush="White" BorderThickness="0,0,0,2">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="C:\\ltudql1_17ck3_17\Icons\l.png" Height="30"/>
                                <Grid>
                                    <TextBox Validation.ErrorTemplate="{StaticResource tberrortemplate}" Width="260" Name="tbUserForgotPass" Background="Black" Foreground="White" >
                                        <TextBox.Text>
                                            <Binding Path="Name"  UpdateSourceTrigger="LostFocus">
                                                <Binding.ValidationRules>
                                                    <v:UsernameValidation length="6"></v:UsernameValidation>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <TextBlock Grid.Row="1" IsHitTestVisible="False" Text="Username" Height="20"  Background="{x:Null}" Margin="15" Foreground="Gray" VerticalAlignment="Center" HorizontalAlignment="Left">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=tbUserForgotPass,Path=Text}" Value="">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                        </Border>
                        <Border Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Center" BorderBrush="White" BorderThickness="0,0,0,2">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="C:\\ltudql1_17ck3_17\Icons\email.png" Height="30"/>
                                <Grid>
                                    <TextBox Focusable="True" Validation.ErrorTemplate="{StaticResource tberrortemplate}" Width="260" Name="tbEmailForgotPass" Background="Black" Foreground="White" >
                                        <TextBox.Text>
                                            <Binding Path="Email" UpdateSourceTrigger="LostFocus">
                                                <Binding.ValidationRules>
                                                    <v:EmailValidation regex=".@(gmail|yahoo)\.com" Msg="Email chưa hợp lệ"></v:EmailValidation>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <TextBlock Grid.Row="1" IsHitTestVisible="False"  Text="Emaillll"  FontWeight="Bold" Margin="15" Foreground="Gray" VerticalAlignment="Center" HorizontalAlignment="Left">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=tbEmailForgotPass,Path=Text}" Value="">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                        </Border>
                        <Border Grid.Row="3" VerticalAlignment="Center" HorizontalAlignment="Center" BorderBrush="White" BorderThickness="0,0,0,2">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="C:\\ltudql1_17ck3_17\Icons\phone.png" Height="30" />
                                <Grid>
                                    <TextBox Validation.ErrorTemplate="{StaticResource tberrortemplate}" Width="260" Name="tbPhoneForgotPass" Background="Black" Foreground="White" >
                                        <TextBox.Text>
                                            <Binding Path="Phone" UpdateSourceTrigger="LostFocus">
                                                <Binding.ValidationRules>
                                                    <v:PhoneValidation regex="\d{10,11}" Msg="Phone không hợp lệ! Phải từ 10-11 kí tự số"></v:PhoneValidation>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <TextBlock  IsHitTestVisible="False"  Text="Phone"  FontWeight="Bold" Margin="15" Foreground="Gray" VerticalAlignment="Center" HorizontalAlignment="Left">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=tbPhoneForgotPass,Path=Text}" Value="">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                        </Border>
                        <Button Name="btnLayLaiPass" Grid.Row="4" Grid.ColumnSpan="2" Background="Gray" Content="Take It Back" FontSize="20" Foreground="White" Opacity="0.6" 
                                MaxWidth="400" MaxHeight="40" Template="{StaticResource btnstyleDNDK}" Click="btnLayLaiPass_Click"/>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem Name="tabSignUp4" Visibility="Collapsed" BorderThickness="0" BorderBrush="Black">
                <TabControl Name="maintabSignup" Background="Black" BorderThickness="0">
                    <TabControl.Resources>
                        <Style TargetType="TextBlock">
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                        <Style TargetType="TextBox">
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="Height" Value="25"/>
                            <Setter Property="MaxWidth" Value="250"/>
                            <Setter Property="Grid.Column" Value="1"/>
                            <Setter Property="Margin" Value="10"/>
                        </Style>
                    </TabControl.Resources>
                    <TabItem Name="tabToSignup1" Visibility="Collapsed">
                        <Grid Background="#FF251818" >
                            <Border Background="Black" Width="500" Height="500">
                                <Border.Effect>
                                    <BlurEffect Radius="30"/>
                                </Border.Effect>
                            </Border>
                            <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Width="500" Height="500">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="0.5*"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition Height="1.2*"/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.Background>
                                    <ImageBrush ImageSource="C:\\hahaha\Images\StarSky.jpg" Stretch="Fill"/>
                                </Grid.Background>
                                <TextBlock  Grid.ColumnSpan="2" VerticalAlignment="Center" HorizontalAlignment="Center" Text="Đăng ký" FontSize="30" FontWeight="Bold" Foreground="White" />
                                <TextBlock  Text="UserName: " Grid.Row="1"></TextBlock>
                                <TextBox Validation.ErrorTemplate="{StaticResource tberrortemplate}" Name="tbUserSignUp" Grid.Row="1" Background="Black" Foreground="White" >
                                    <TextBox.Text>
                                        <Binding Path="Name"  UpdateSourceTrigger="LostFocus">
                                            <Binding.ValidationRules>
                                                <v:UsernameValidation length="6" type="signup"></v:UsernameValidation>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox.Text>
                                </TextBox>
                                <TextBlock  Text="Password: " Grid.Row="2"></TextBlock>
                                <PasswordBox Validation.ErrorTemplate="{StaticResource tberrortemplate}"  Name="tbPassSignUp" Grid.Row="2" Grid.Column="1" Background="Black" Foreground="White" 
                                     VerticalAlignment="Center" Height="25" Width="250" m:PasswordBoxAssistant.BindPassword="True" 
                                     m:PasswordBoxAssistant.BoundPassword="{Binding Pasword,UpdateSourceTrigger=LostFocus,Mode=TwoWay,ValidatesOnDataErrors=True,ValidatesOnExceptions=True}"/>
                                <TextBlock  Text="Confirm Password: " Grid.Row="3"></TextBlock>
                                <PasswordBox Validation.ErrorTemplate="{StaticResource tberrortemplate}" Name="tbConfirmSignUp" Grid.Row="3" Grid.Column="1" Background="Black" Foreground="White" 
                                     VerticalAlignment="Center" Height="25" Width="250" m:PasswordBoxAssistant.BindPassword="True" 
                                     m:PasswordBoxAssistant.BoundPassword="{Binding ConfirmPasword,UpdateSourceTrigger=LostFocus,Mode=TwoWay,ValidatesOnDataErrors=True,ValidatesOnExceptions=True}"/>
                                <TextBlock Text="Email: " Grid.Row="4"></TextBlock>
                                <TextBox Validation.ErrorTemplate="{StaticResource tberrortemplate}" Name="tbEmailSignUp" Grid.Row="4" Background="Black" Foreground="White" >
                                    <TextBox.Text>
                                        <Binding Path="Email"  UpdateSourceTrigger="LostFocus">
                                            <Binding.ValidationRules>
                                                <v:EmailValidation regex=".@(gmail|yahoo)\.com" Msg="Email chưa hợp lệ"></v:EmailValidation>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox.Text>
                                </TextBox>
                                <TextBlock Text="Phone Number: " Grid.Row="5"></TextBlock>
                                <TextBox Name="tbPhoneSignUp" Validation.ErrorTemplate="{StaticResource tberrortemplate}" Grid.Row="5" Background="Black" Foreground="White" >
                                    <TextBox.Text>
                                        <Binding Path="Phone"  UpdateSourceTrigger="LostFocus">
                                            <Binding.ValidationRules>
                                                <v:PhoneValidation regex="\d{10,11}" Msg="Phone không hợp lệ! Phải từ 10-11 kí tự số"></v:PhoneValidation>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox.Text>
                                </TextBox>
                                <Button Name="btnNextSignUp" Grid.Row="7" Grid.ColumnSpan="2" Background="Gray" Content="Next" FontSize="20" Foreground="White" Opacity="0.6" 
                                MaxWidth="400" MaxHeight="40" Template="{StaticResource btnstyleDNDK}" Click="btnNextSignUp_Click"/>
                            </Grid>
                        </Grid>
                    </TabItem>
                    <TabItem Name="tabToSignUp2" Visibility="Collapsed" Background="Black">
                        <Grid Background="#FF251818">
                            <Border Background="Black" Width="500" Height="500">
                                <Border.Effect>
                                    <BlurEffect Radius="30"/>
                                </Border.Effect>
                            </Border>
                            <Grid HorizontalAlignment="Center" Width="500" Height="500">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="0.7*"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.Background>
                                    <ImageBrush ImageSource="C:\\hahaha\Images\StarSky.jpg" Stretch="Fill"/>
                                </Grid.Background>
                                <TextBlock Text="Step2" Foreground="White" Grid.ColumnSpan="2" VerticalAlignment="Top" Margin="20" HorizontalAlignment="Center" FontSize="20"/>
                                <TextBlock Text="Accounts Level: " Grid.Row="0"></TextBlock>
                                <ComboBox Name="cbAcountLevel" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=LstCapDo}" Grid.Column="1" Grid.Row="0" VerticalAlignment="Center" 
                                  HorizontalAlignment="Center" Width="200" SelectedValuePath="ID" DisplayMemberPath="Name"  />
                                <StackPanel Orientation="Horizontal"  Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Center" Grid.ColumnSpan="2">
                                    <TextBlock Text="Basic: 30 days, Medium: 90 days, Standard: 180 days" Foreground="YellowGreen"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.ColumnSpan="2" HorizontalAlignment="Center">
                                    <Button Content="Back" Height="30" Margin="10,0" Template="{StaticResource btnstyleDNDK}" Width="200" Background="Gray" FontSize="20" Foreground="White" Opacity="0.6"  Click="Button_Click"/>
                                    <Button Name="btnSignUp" Content="Đăng ký" Height="30" Margin="10,0" Template="{StaticResource btnstyleDNDK}" Width="200" Background="Gray" FontSize="20" Foreground="White" Opacity="0.6"  Click="btnSignUp_Click"/>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </TabItem>
                </TabControl>
            </TabItem>
            <TabItem Name="tabPhimChuDe5" Visibility="Collapsed">
                <Grid>
                    <ScrollViewer Name="formchudeScroll" VerticalScrollBarVisibility="Auto"  Background="#FF251818" Width="{Binding ElementName=itemsourceChudeForm,Path=Width}" >
                        <Grid Name="formchudeGrid" MouseEnter="grid_MouseEnter" Margin="20" MouseLeave="grid_MouseLeave">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition />
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Border Name="tempborderdetail" Height="600" Grid.Row="3" Background="{x:Null}" 
                                    Visibility="{Binding Source={StaticResource mainformprovider},Path=SelectedPhim,Converter={StaticResource objectempty}}"/>
                            <TextBlock Name="tbChuDe" Grid.Row="0" Grid.Column="1"  FontSize="20" Margin="50,20" Foreground="White" FontWeight="Bold" VerticalAlignment="Top"/>
                            <ItemsControl  Margin="30" Grid.Row="1"  HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Name="itemsourceChudeForm" ItemsSource="{Binding}" VerticalAlignment="Top" >
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel  Margin="10,0,0,0" HorizontalAlignment="Stretch" ItemHeight="300" VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Standard"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemContainerStyle>
                                    <Style TargetType="ContentPresenter">
                                        <Setter Property="Margin" Value="3"/>
                                    </Style>
                                </ItemsControl.ItemContainerStyle>
                            </ItemsControl>
                        </Grid>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            <TabItem Name="tabXemPhim6" Visibility="Collapsed">
                <Grid>
                    <ScrollViewer Name="formXemPhimScroll"  >
                        <StackPanel Name="stXemPhim">
                            <Grid Name="gridMediaPhim" Tag="{Binding ElementName=gridstbPhim}" Width="1100" Height="550" RenderTransformOrigin=".5,.5"  Visibility="Collapsed" MouseEnter="gridMediaTrailer_MouseEnter" MouseLeave="gridMediaTrailer_MouseLeave"  MouseMove="gridMediaTrailer_MouseMove" >
                                <Grid.LayoutTransform>
                                    <ScaleTransform/>
                                </Grid.LayoutTransform>
                                <MediaElement Name="mediaPhim" Focusable="True" PreviewKeyDown="formXemPhimScroll_KeyDown" Stretch="UniformToFill" Source="{Binding Trailer}"  VerticalAlignment="Center" HorizontalAlignment="Center"  LoadedBehavior="Manual" MouseLeftButtonUp="mediaTrailer_MouseLeftButtonUp"/>
                                <Grid Name="gridstbPhim">
                                    <Border Background="Black" Opacity="0.2" Height="{Binding ElementName=stb,Path=ActualHeight}" VerticalAlignment="Bottom"/>
                                    <Grid Name="gridTooltip" Opacity="1" Margin="0" Height="100" Width="170" HorizontalAlignment="Left" VerticalAlignment="Bottom" Visibility="Collapsed">
                                        <MediaElement Name="mediaTooltip" Opacity="1" Source="{Binding Trailer}"  Stretch="Fill" ScrubbingEnabled="True" LoadedBehavior="Manual" IsMuted="True"/>
                                        <TextBlock Name="tbTooltip" Background="Black" Foreground="White" VerticalAlignment="Bottom" Margin="1" Padding="3" FontWeight="Bold" HorizontalAlignment="Center" />
                                    </Grid>
                                    <StatusBar Name="stbPhim" Background="Transparent" VerticalAlignment="Bottom">
                                        <StatusBar.Resources>
                                            <Style TargetType="Grid">
                                                <Setter Property="Opacity" Value="0.7"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Opacity" Value="1"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </StatusBar.Resources>
                                        <StatusBar.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                </Grid>
                                            </ItemsPanelTemplate>
                                        </StatusBar.ItemsPanel>
                                        <StatusBarItem Grid.Row="1">
                                            <Grid Margin="5,0" VerticalAlignment="Center">
                                                <Grid Name="pauseMediaGridPhim" Tag="{Binding ElementName=mediaPhim}" VerticalAlignment="Center"  Background="Transparent" Height="30" Width="31" MouseLeftButtonUp="pauseMediaGrid_MouseLeftButtonUp">
                                                    <Rectangle Fill="White" Width="5" Height="20" Margin="6,0,0,0" HorizontalAlignment="Left"/>
                                                    <Rectangle Fill="White" Width="5" Height="20" Margin="0,0,6,0" HorizontalAlignment="Right"/>
                                                </Grid>
                                                <Grid Name="playMediaGridPhim" Tag="{Binding ElementName=mediaPhim}" Background="Transparent" Height="30" Width="30" Margin="1,0,0,0"  VerticalAlignment="Center" Visibility="Collapsed" MouseLeftButtonUp="playMediaPath_MouseLeftButtonUp">
                                                    <Path Data="M 5,5 L 20,15 L 5,25 Z"  Fill="White"  />
                                                </Grid>
                                            </Grid>
                                        </StatusBarItem>
                                        <StatusBarItem Grid.Row="1" Grid.Column="1" VerticalAlignment="Center">
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBlock Name="tbCurrent" Foreground="White">00:00:00</TextBlock>
                                                <TextBlock Name="tbMaxDuration" Foreground="White"> / 00:00:00</TextBlock>
                                            </StackPanel>
                                        </StatusBarItem>
                                        <StatusBarItem Grid.ColumnSpan="3" HorizontalContentAlignment="Stretch" VerticalAlignment="Center" Background="{x:Null}">
                                            <StackPanel>
                                                <Slider Name="sliProgressPhim" Tag="{Binding ElementName=mediaPhim}" AutoToolTipPlacement="TopLeft" IsMoveToPointEnabled="True"  Style="{StaticResource Horizontal_Slider}" Background="Transparent" 
                                                Thumb.DragStarted="sliProgress_DragStarted" Thumb.DragCompleted="sliProgress_DragCompleted" ValueChanged="sliProgress_ValueChanged" MouseMove="sliProgress_MouseMove" 
                                                    MouseLeave="sliProgress_MouseLeave" PreviewMouseLeftButtonUp="sliProgress_PreviewMouseLeftButtonUp" MouseEnter="sliProgressPhim_MouseEnter" RenderTransformOrigin=".5,.5">
                                                    <Slider.RenderTransform>
                                                        <ScaleTransform/>
                                                    </Slider.RenderTransform>
                                                </Slider>
                                            </StackPanel>
                                        </StatusBarItem>
                                        <StatusBarItem Grid.Column="2" Grid.Row="1">
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                                                <TextBlock Name="tbPhanGiaiPhim" Foreground="White" ToolTip="Độ phân giải" Margin="10,0" VerticalAlignment="Center"/>
                                                <Slider  IsSnapToTickEnabled="True" IsMoveToPointEnabled="True" LargeChange="0.1" SmallChange="0.1" AutoToolTipPrecision="1" AutoToolTipPlacement="BottomRight" Width="50" Height="12" TickFrequency="0.1"
                                            Style="{StaticResource Volume_Slider}" Maximum="1" Minimum="0" Margin="10,0" Value="{Binding ElementName=mediaPhim, Path=Volume,Mode=TwoWay}" VerticalAlignment="Center" />
                                                <Grid  Width="30" Height="30" VerticalAlignment="Top" Background="Transparent" MouseLeftButtonUp="gridMaximizeMedia_MouseLeftButtonUp">
                                                    <Path Data="m 10 16 l 2 0 l 0 -4 l 4 0 l 0 -2 L 10 10 l 0 6 l 0 0 Z" Fill="White"/>
                                                    <Path Data="m 20 10 l 0 2 l 4 0 l 0 4 l 2 0 L 26 10 l -6 0 l 0 0 Z" Fill="White"/>
                                                    <Path Data="m 24 24 l -4 0 l 0 2 L 26 26 l 0 -6 l -2 0 l 0 4 l 0 0 Z" Fill="White"/>
                                                    <Path Data="M 12 20 L 10 20 L 10 26 l 6 0 l 0 -2 l -4 0 l 0 -4 l 0 0 Z" Fill="White"/>
                                                </Grid>
                                            </StackPanel>
                                        </StatusBarItem>
                                    </StatusBar>
                                </Grid>
                            </Grid>
                            <Border Height="200" Visibility="{Binding ElementName=gridMediaPhim,Path=Visibility}"/>
                            <Grid Background="Black"  VerticalAlignment="Top" Grid.Row="1" DockPanel.Dock="Bottom"
                              Width="{Binding ElementName=maintabcontrol,Path=ActualWidth}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.Height>
                                    <MultiBinding Converter="{StaticResource griddetailheight}" UpdateSourceTrigger="PropertyChanged">
                                        <Binding Path="IsFormCategory" Source="{StaticResource mainformprovider}"/>
                                        <Binding Path="GridDetailHeight" Source="{StaticResource mainformprovider}"/>
                                        <Binding Path="ActualHeight" ElementName="maintabcontrol"/>
                                    </MultiBinding>
                                </Grid.Height>

                                <Image Source="{Binding Hinh}" HorizontalAlignment="Right"  Stretch="Fill" Grid.Column="1"
                       Width="{Binding ElementName=maintabcontrol,Path=ActualWidth,Converter={StaticResource imagedetailwidth}}">
                                </Image>
                                <Border Background="Black" Grid.ColumnSpan="2" Opacity="0.2" HorizontalAlignment="Left" Width="{Binding ElementName=maintabcontrol,Path=ActualWidth}" >
                                </Border>
                                <Border Background="Black" Grid.ColumnSpan="2" Opacity="0.5" HorizontalAlignment="Left" MinWidth="350" MaxWidth="600">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="100" ShadowDepth="0"/>
                                    </Border.Effect>
                                </Border>
                                <Button Name="btnPlayPhim" Grid.ColumnSpan="2" Width="60" Height="60" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="200,0" Click="btnPlayPhim_Click">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Grid Name="grid" Opacity="0.6" >
                                                            <Ellipse Width="60" Height="60" Name="bd" RenderTransformOrigin="0.5,0.5" IsHitTestVisible="False">
                                                                <Ellipse.Fill>
                                                                    <SolidColorBrush Color="Transparent"/>
                                                                </Ellipse.Fill>
                                                                <Ellipse.RenderTransform>
                                                                    <ScaleTransform/>
                                                                </Ellipse.RenderTransform>
                                                            </Ellipse>
                                                            <Ellipse Name="e" StrokeThickness="2" Stroke="White" Fill="Black" Width="60" Height="60" RenderTransformOrigin="0.5,0.5">
                                                                <Ellipse.RenderTransform>
                                                                    <ScaleTransform/>
                                                                </Ellipse.RenderTransform>
                                                            </Ellipse>
                                                            <Path Name="path" Data="M 22,14 L 44,30 L 22,46 Z" Fill="White" />
                                                        </Grid>
                                                        <ControlTemplate.Resources>
                                                            <Storyboard x:Key="Play" Duration="0:0:0.7" RepeatBehavior="Forever" AutoReverse="True">
                                                                <Storyboard.Children>
                                                                    <DoubleAnimation  Storyboard.TargetName="e" Duration="0:0:0.5"  Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" To="1.2"/>
                                                                    <DoubleAnimation  Storyboard.TargetName="e" Duration="0:0:0.5" Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" To="1.2"/>
                                                                    <DoubleAnimation Storyboard.TargetName="bd" Duration="0:0:0.5"   Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" To="2.5"/>
                                                                    <DoubleAnimation Storyboard.TargetName="bd" Duration="0:0:0.5"   Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" To="2.5"/>
                                                                </Storyboard.Children>
                                                            </Storyboard>
                                                            <Storyboard x:Key="Play2" Duration="0:0:1.4" BeginTime="0:0:0"   RepeatBehavior="Forever" >
                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="bd"  Storyboard.TargetProperty="Opacity">
                                                                    <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
                                                                </DoubleAnimationUsingKeyFrames>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bd" BeginTime="0:0:0.5" Storyboard.TargetProperty="Visibility">
                                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Collapsed}"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                                <ColorAnimation Storyboard.TargetName="bd" Duration="0:0:0.5"   Storyboard.TargetProperty="(Ellipse.Fill).(SolidColorBrush.Color)" From="Transparent" To="Yellow"/>
                                                            </Storyboard>
                                                        </ControlTemplate.Resources>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="False">
                                                                <Trigger.EnterActions>
                                                                    <BeginStoryboard Name="bg" Storyboard="{StaticResource Play}"/>
                                                                    <BeginStoryboard Name="fade" Storyboard="{StaticResource Play2}"/>
                                                                </Trigger.EnterActions>
                                                            </Trigger>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Trigger.EnterActions>
                                                                    <StopStoryboard  BeginStoryboardName="bg"/>
                                                                    <StopStoryboard BeginStoryboardName="fade"/>
                                                                </Trigger.EnterActions>
                                                                <Setter TargetName="grid" Property="Opacity" Value="1"/>
                                                                <Setter TargetName="path" Property="Fill" Value="Red"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Grid VerticalAlignment="Top" HorizontalAlignment="Left" Margin="5" Grid.ColumnSpan="2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition MaxHeight="300" Height="*"/>
                                        <RowDefinition Height="40"/>
                                        <RowDefinition/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock VerticalAlignment="Bottom" HorizontalAlignment="Left" Text="{Binding Name}" Foreground="White" FontWeight="Bold" FontSize="30" Margin="0,20,0,0"/>
                                    <!--<Image Source="{Binding Logo}" MinWidth="{Binding ElementName=borderdetail,Path=ActualWidth}" MinHeight="170" MaxWidth="500"/>-->
                                    <StackPanel Orientation="Horizontal" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Left">
                                        <Image Source="C:\\hahaha\Icons\clock.jpg" Opacity="0.8" Width="25" Height="25" Stretch="Fill"  Margin="5" />
                                        <TextBlock Foreground="White" FontSize="17" Text="{Binding ThoiGian}" VerticalAlignment="Center" Margin="5"/>
                                        <TextBlock Foreground="White" FontSize="17" Text="Release: " VerticalAlignment="Center" Margin="10,0,0,0"/>
                                        <TextBlock Foreground="White" FontSize="17" Text="{Binding ReleaseDate}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Left">
                                        <Border BorderBrush="Gray" Background="Black" BorderThickness="1" Margin="0,5">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="IMDB" Foreground="White" FontSize="17" Margin="5"/>
                                                <TextBlock Text="{Binding RatingIMDB}" FontSize="17" Margin="5" Foreground="White" FontWeight="Bold" />
                                            </StackPanel>
                                        </Border>
                                        <ItemsControl ItemsSource="{Binding TheLoai1}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <VirtualizingStackPanel Orientation="Horizontal"/>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate DataType="{x:Type local:TheLoai}">
                                                    <Border BorderBrush="Gray" Background="Black" BorderThickness="1" Margin="5" MouseLeftButtonUp="gridChude_MouseLeftButtonDown" Tag="{Binding .}">
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Name="tb" Text="{Binding Name}" FontSize="17" Margin="5" Foreground="White" FontWeight="Bold" />
                                                        </StackPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="tb" Property="TextDecorations" Value="Underline"/>
                                                        </Trigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left" Grid.Row="3" MaxWidth="500" Margin="0,10">
                                        <TextBlock Text="Nội dung phim" Foreground="White" FontWeight="Bold" FontSize="19" Margin="0,10"/>
                                        <TextBlock IsHitTestVisible="True" Text="{Binding NoiDung}" FontSize="17"  TextWrapping="Wrap" Margin="0,5" MaxHeight="200" >
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="Gray"/>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Grid.Row="4" >
                                        <Button Name="btnXemTrailer" Background="Red" Click="btnXemTrailer_Click">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <Border Background="Teal" Width="{TemplateBinding Width}">
                                                            <Border.Effect>
                                                                <BlurEffect Radius="10"/>
                                                            </Border.Effect>
                                                        </Border>
                                                        <Border Name="bd" Background="{TemplateBinding Background}" Width="{TemplateBinding Width}" Padding="10">
                                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                                <Path Data="M 0,0 L 10,10 L 0,20 Z" Width="20" Height="20" Fill="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                <TextBlock Text="Xem Trailer" FontSize="18" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </StackPanel>
                                                        </Border>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="bd" Property="Background" Value="Brown"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Name="btnAddYeuThich" Background="Black" Margin="20,0" Padding="10" Click="btnAddPlaylist_Click" >
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <Border Background="Gray" Width="{TemplateBinding Width}">
                                                            <Border.Effect>
                                                                <BlurEffect Radius="10"/>
                                                            </Border.Effect>
                                                        </Border>
                                                        <Border  Width="{TemplateBinding Width}" Padding="10">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Setter Property="Background" Value="Black"/>
                                                                </Style>
                                                            </Border.Style>
                                                            <Border.Background>
                                                                <MultiBinding Converter="{StaticResource IsOnPlayListConvert}" UpdateSourceTrigger="PropertyChanged">
                                                                    <Binding Source="{StaticResource mainformprovider}" Path="SelectedProfile" UpdateSourceTrigger="PropertyChanged"/>
                                                                    <Binding  Path="ID" UpdateSourceTrigger="PropertyChanged"/>
                                                                    <Binding />
                                                                </MultiBinding>
                                                            </Border.Background>
                                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                                <Path Name="path" Data="M 0,10 L 10,10 L 10,0 L 13,0 L 13,10 L 23,10 L 23,13 L 13,13 L 13,23 L 10,23 L 10,13 L 0,13 Z" 
                                                      Fill="White" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0"/>
                                                                <TextBlock Name="tb" Text="Yêu Thích" FontSize="18" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,0"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="path" Property="Fill" Value="Red"/>
                                                            <Setter TargetName="tb" Property="Foreground" Value="Red"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                            <Grid VerticalAlignment="Bottom" >
                                <Border Background="Black">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="50" Direction="200" ShadowDepth="-0"/>
                                    </Border.Effect>
                                </Border>
                                <StackPanel>
                                    <ItemsControl Name="itemsourceDeXuat"  Tag="Đề xuất cho bạn" Template="{StaticResource itemsource}" VerticalAlignment="Center" HorizontalAlignment="Left" Height="280"  Margin="50">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <VirtualizingStackPanel Orientation="Horizontal"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                    </ItemsControl>
                                    <Border Name="tempborder" BorderThickness="0" Background="#FF1A1212" Height="605" VerticalAlignment="Center">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="Visibility" Value="Visible"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=SelectedPhim}" Value="{x:Null}">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </ScrollViewer>
                    <Grid Name="gridTrailer" Visibility="Collapsed" >
                        <Border Name="borderTrailer" Background="Black" Opacity="0.8" MouseLeftButtonDown="borderTrailer_MouseLeftButtonDown"/>
                        <Button Name="btnExitGridTrailer" Foreground="White" Content="X" FontSize="25" FontWeight="Bold" Background="Transparent" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="30" Click="btnExitGridTrailer_Click"/>
                        <Grid Name="gridMediaTrailer" Width="800" Height="550" Tag="{Binding ElementName=gridStatusBar}" MouseEnter="gridMediaTrailer_MouseEnter" MouseLeave="gridMediaTrailer_MouseLeave"  MouseMove="gridMediaTrailer_MouseMove" >
                            <MediaElement Name="mediaTrailer" Stretch="Fill" Source="{Binding Trailer}"  VerticalAlignment="Center" HorizontalAlignment="Center"  LoadedBehavior="Manual" MouseLeftButtonUp="mediaTrailer_MouseLeftButtonUp"/>
                            <Grid Name="gridStatusBar">
                                <Border Background="Black" Opacity="0.2" Height="{Binding ElementName=stb,Path=ActualHeight}" VerticalAlignment="Bottom"/>
                                <Grid Name="gridtooltip" Opacity="1" Margin="0" Height="100" Width="170" HorizontalAlignment="Left" VerticalAlignment="Bottom" Visibility="Collapsed">
                                    <MediaElement Name="mediatooltip" Opacity="1" Source="{Binding Trailer}"  Stretch="Fill" ScrubbingEnabled="True" LoadedBehavior="Manual" IsMuted="True"/>
                                    <TextBlock Name="tbtooltip" Background="Black" Foreground="White" VerticalAlignment="Bottom" Margin="1" Padding="3" FontWeight="Bold" HorizontalAlignment="Center" />
                                    <Path Name="pathtooltip" Data="M 20,15 L 30,15 L 25,20 Z" VerticalAlignment="Bottom" Margin="80,0" Fill="White">
                                        <Path.RenderTransform>
                                            <TranslateTransform Y="0"/>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                                <StatusBar Name="stb" Background="Transparent" VerticalAlignment="Bottom">
                                    <StatusBar.Resources>
                                        <Style TargetType="Grid">
                                            <Setter Property="Opacity" Value="0.7"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Opacity" Value="1"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StatusBar.Resources>
                                    <StatusBar.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                            </Grid>
                                        </ItemsPanelTemplate>
                                    </StatusBar.ItemsPanel>
                                    <StatusBarItem Grid.Row="1">
                                        <Grid Margin="5,0" VerticalAlignment="Center">
                                            <Grid VerticalAlignment="Center" Name="pauseMediaGrid" Tag="{Binding ElementName=mediaTrailer}" Background="Transparent" Height="30" Width="31" MouseLeftButtonUp="pauseMediaGrid_MouseLeftButtonUp">
                                                <Rectangle Fill="White" Width="5" Height="20" Margin="6,0,0,0" HorizontalAlignment="Left"/>
                                                <Rectangle Fill="White" Width="5" Height="20" Margin="0,0,6,0" HorizontalAlignment="Right"/>
                                            </Grid>
                                            <Grid Name="playMediaPath" Tag="{Binding ElementName=mediaTrailer}" Background="Transparent" Height="30" Width="30" Margin="1,0,0,0"  VerticalAlignment="Center" Visibility="Collapsed" MouseLeftButtonUp="playMediaPath_MouseLeftButtonUp">
                                                <Path Data="M 5,5 L 20,15 L 5,25 Z"  Fill="White"  />
                                            </Grid>
                                        </Grid>
                                    </StatusBarItem>
                                    <StatusBarItem Grid.Row="1" Grid.Column="1" VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Name="lblProgressStatus" Foreground="White">00:00:00</TextBlock>
                                            <TextBlock Name="lblMaxProgressStatus" Foreground="White"> / 00:00:00</TextBlock>
                                        </StackPanel>
                                    </StatusBarItem>
                                    <StatusBarItem Grid.ColumnSpan="3" HorizontalContentAlignment="Stretch" VerticalAlignment="Center" Background="{x:Null}">
                                        <StackPanel>
                                            <Slider Name="sliProgress" Tag="{Binding ElementName=mediaTrailer}" AutoToolTipPlacement="TopLeft" IsMoveToPointEnabled="True"  Style="{StaticResource Horizontal_Slider}" Background="Transparent" 
                                                Thumb.DragStarted="sliProgress_DragStarted" Thumb.DragCompleted="sliProgress_DragCompleted" ValueChanged="sliProgress_ValueChanged" MouseMove="sliProgress_MouseMove" 
                                                    MouseLeave="sliProgress_MouseLeave" PreviewMouseLeftButtonUp="sliProgress_PreviewMouseLeftButtonUp" RenderTransformOrigin=".5,.5">
                                                <Slider.RenderTransform>
                                                    <ScaleTransform/>
                                                </Slider.RenderTransform>
                                            </Slider>
                                        </StackPanel>
                                    </StatusBarItem>
                                    <StatusBarItem Grid.Column="2" Grid.Row="1">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                                            <TextBlock Name="tbPhanGiai" Foreground="White" ToolTip="Độ phân giải" Margin="10,0" VerticalAlignment="Center"/>
                                            <Slider Name="pbVolume" IsSnapToTickEnabled="True" IsMoveToPointEnabled="True" LargeChange="0.1" SmallChange="0.1" AutoToolTipPrecision="1" AutoToolTipPlacement="BottomRight" Width="50" Height="12" TickFrequency="0.1"
                                            Style="{StaticResource Volume_Slider}" Maximum="1" Minimum="0" Margin="10,0" Value="{Binding ElementName=mediaTrailer, Path=Volume,Mode=TwoWay}" VerticalAlignment="Center" />
                                            <!--<Grid Name="gridMaximizeMedia" Width="30" Height="30" VerticalAlignment="Top" Background="Transparent" MouseLeftButtonUp="gridMaximizeMedia_MouseLeftButtonUp">
                                                <Path Data="m 10 16 l 2 0 l 0 -4 l 4 0 l 0 -2 L 10 10 l 0 6 l 0 0 Z" Fill="White"/>
                                                <Path Data="m 20 10 l 0 2 l 4 0 l 0 4 l 2 0 L 26 10 l -6 0 l 0 0 Z" Fill="White"/>
                                                <Path Data="m 24 24 l -4 0 l 0 2 L 26 26 l 0 -6 l -2 0 l 0 4 l 0 0 Z" Fill="White"/>
                                                <Path Data="M 12 20 L 10 20 L 10 26 l 6 0 l 0 -2 l -4 0 l 0 -4 l 0 0 Z" Fill="White"/>
                                            </Grid>-->
                                        </StackPanel>
                                    </StatusBarItem>
                                </StatusBar>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem Name="tabUserDetail7" Visibility="Collapsed">
                <Grid DataContext="{Binding Source={StaticResource mainformprovider},Path=User,UpdateSourceTrigger=PropertyChanged}">
                    <Grid.Resources>
                        <Style TargetType="Button">
                            <Setter Property="Padding" Value="3"/>
                            <Setter Property="VerticalAlignment" Value="Bottom"/>
                            <Setter Property="Background" Value="Black"/>
                            <Setter Property="BorderBrush" Value="Gray"/>
                            <Setter Property="BorderThickness" Value="2"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontSize" Value="20"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Foreground" Value="Red"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Grid.Resources>
                    <Grid.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="Black" Offset="0"/>
                            <GradientStop Color="#FF936565" Offset="1"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="380"/>
                        <RowDefinition Height="50"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.7*"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <StackPanel DataContext="{Binding Source={StaticResource mainformprovider},Path=SelectedProfile}" VerticalAlignment="Center">
                            <Border BorderBrush="AntiqueWhite" BorderThickness="2" MaxWidth="300" MaxHeight="300"  >
                                <Image Name="imageProfileDetail" Source="{Binding Hinh,Mode=OneWay}" MaxWidth="300" MaxHeight="300" HorizontalAlignment="Center"/>
                            </Border>
                            <TextBox Name="tbProfileName" Text="{Binding ProfileName,Mode=OneWay}" TextChanged="tbProfileName_TextChanged" BorderBrush="Gray" BorderThickness="1" FontWeight="Bold" HorizontalAlignment="Center" Margin="15,0,0,5" Padding="3">
                                <TextBox.Style>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Background" Value="Black"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsFocused" Value="True">
                                                <Setter Property="Background" Value="White"/>
                                                <Setter Property="Foreground" Value="Black"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBox.Style>
                            </TextBox>

                        </StackPanel>
                        <GroupBox Header="Thông tin chi tiết" Foreground="White" FontWeight="Bold" FontSize="20" Grid.Column="1" BorderThickness="1" BorderBrush="Red">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="0.5*"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.Resources>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="HorizontalAlignment" Value="Right"/>
                                    </Style>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Height" Value="30"/>
                                        <Setter Property="Width" Value="100"/>
                                        <Setter Property="Grid.Column" Value="1"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="HorizontalAlignment" Value="Left"/>
                                    </Style>
                                </Grid.Resources>
                                <TextBlock Text="Username: "/>
                                <TextBlock Text="Password: " Grid.Row="1"/>
                                <TextBlock Text="Email: " Grid.Row="2"/>
                                <TextBlock Text="Phone: " Grid.Row="3"/>
                                <TextBlock Text="Cấp Độ: " Grid.Row="4"/>
                                <TextBlock Text="Thanh Toán: " Grid.Row="5"/>
                                <TextBlock Text="{Binding Name}" HorizontalAlignment="Left" Grid.Column="1" Margin="10"/>
                                <TextBlock Text="{Binding Password,Converter={StaticResource MarkUpPassword}}" Grid.Row="1" HorizontalAlignment="Left" Grid.Column="1" Margin="10"/>
                                <TextBox Name="tbEmailDetail" Validation.ErrorTemplate="{StaticResource tberrortemplate}"  Grid.Row="2" MaxWidth="500" Width="230" Margin="10">
                                    <TextBox.Text>
                                        <Binding Path="Email"  UpdateSourceTrigger="LostFocus">
                                            <Binding.ValidationRules>
                                                <v:PhoneValidation regex="\d{10,11}" Msg="Phone không hợp lệ! Phải từ 10-11 kí tự số"></v:PhoneValidation>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox.Text>
                                </TextBox>
                                <TextBox Name="tbPhoneDetail" Validation.ErrorTemplate="{StaticResource tberrortemplate}"  Grid.Row="3" MaxWidth="500" Width="230" Margin="10">
                                    <TextBox.Text>
                                        <Binding Path="Phone" UpdateSourceTrigger="LostFocus">
                                            <Binding.ValidationRules>
                                                <v:PhoneValidation regex="\d{10,11}" Msg="Phone không hợp lệ! Phải từ 10-11 kí tự số"></v:PhoneValidation>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox.Text>
                                </TextBox>
                                <TextBlock Text="{Binding MaCapDo,Converter={StaticResource TenCapDoConvert}}" Grid.Row="4" Grid.Column="1" HorizontalAlignment="Left" Margin="10"/>
                                <TextBlock Name="tbTT" Text="{Binding ThanhToan,Converter={StaticResource PaidOrNot},UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Grid.Row="5" MaxWidth="400" Margin="10" Grid.Column="1"/>
                                <Button Name="btnToThanhToan" Content="Thanh toán" Grid.Row="5" Grid.Column="2" Click="btnToThanhToan_Click" Padding="3" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="10">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=tbTT,Path=Text}" Value="Chưa thanh toán">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <TextBlock Text="{Binding .,Converter={StaticResource ThoiHanConvert}}" Grid.Row="5" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Left" >
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=btnToThanhToan,Path=Visibility}" Value="Collapsed">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Grid>
                        </GroupBox>
                    </Grid>
                    <Button Name="btnChangeProfileImage" Content="Đổi Hình" Command="ApplicationCommands.Open"  Padding="3" 
                                    BorderThickness="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="200,0,0,5" Grid.Row="1"/>
                    <Button Name="btnSaveProfile" Content="Lưu Thay Đổi" Grid.Row="1" Click="btnSaveProfile_Click" Margin="5" />
                    <Button Name="btnHuy" Content="Đặt lại"  Grid.Row="1"  HorizontalAlignment="Right" Margin="50,5" Click="btnHuy_Click"/>
                    <GroupBox Header="Thông tin thanh toán" Grid.Row="2" Background="Black" Foreground="White" FontSize="20" FontWeight="Bold" BorderBrush="Red" BorderThickness="0.5">
                        <DataGrid Name="dtgLSTT" ItemsSource="{Binding UserThanhToan}" Margin="10" Background="Black" AutoGenerateColumns="False" ColumnWidth="*" ColumnHeaderStyle="{StaticResource dtgheaderstyle}"
                                  CellStyle="{StaticResource dtgCellstyle}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Cấp Độ" Binding="{Binding CapDo}" IsReadOnly="True" />
                                <DataGridTextColumn Header="Ngày Thanh Toán" Binding="{Binding NgayTT}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Ngày Kết Thúc" Binding="{Binding NgayKT}" IsReadOnly="True"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                    <Grid Name="gridThanhToan" Visibility="Collapsed">
                        <Border Background="Black" Opacity="0.8"/>
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Height="300" Width="400">
                            <TextBlock Text="Chọn Cấp Độ Và Thanh Toán" FontWeight="Bold" HorizontalAlignment="Center" FontSize="20" Foreground="Gray" VerticalAlignment="Top" Margin="20"/>
                            <ComboBox Name="cbThanhToan" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=LstCapDo}" DisplayMemberPath="Name" SelectedValuePath="ID"
                                      VerticalAlignment="Center" Margin="20" SelectedValue="{Binding MaCapDo}"/>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" Margin="20">
                                <Button Name="btnThanhToan" Content="Thanh Toán" Padding="5" Margin="10" Click="btnThanhToan_Click"/>
                                <Button Name="btnHuyThanhToan" Content="Hủy" Padding="5" Margin="10" Click="btnHuyThanhToan_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                </Grid>
            </TabItem>
            <TabItem Name="tabChoseProfile8" Visibility="Collapsed">
                <Grid>
                    <Grid.Resources>
                        <DataTemplate DataType="{x:Type local:UserProfile}">
                            <StackPanel Name="stProfile" Margin="10" MouseLeftButtonUp="stProfile_MouseLeftButtonUp">
                                <Image Source="{Binding Hinh}" Width="200" Height="150"/>
                                <TextBlock Text="{Binding ProfileName}" FontWeight="Bold" FontSize="20" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </Grid.Resources>
                    <ItemsControl  ItemsSource="{Binding .}" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.Template>
                            <ControlTemplate TargetType="ItemsControl">
                                <WrapPanel>
                                    <ItemsPresenter/>
                                    <Border Name="borderToAddProfile" BorderBrush="Gray" BorderThickness="1" Background="Black" Width="200" Height="170" MouseLeftButtonDown="borderToAddProfile_MouseLeftButtonDown">
                                        <Path Data="M 20,75 L 90,75 L 90,5 L 110,5 L 110,75 L 180,75 L 180,95 L 110,95 L 110,165 L 90,165 L 90,95 L 20,95 Z" Fill="White" Stroke="White" />
                                    </Border>
                                </WrapPanel>
                            </ControlTemplate>
                        </ItemsControl.Template>
                    </ItemsControl>
                    <Grid Name="gridAddProfile" Visibility="Collapsed">
                        <Border Background="Black" Opacity="0.3"/>
                        <Button Name="btnExitAddProfile" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="20" Foreground="White" Background="Transparent" Content="X" FontSize="20" FontWeight="Bold" Click="btnExitAddProfile_Click"/>
                        <Grid Background="Gray" Width="300" Height="300">
                            <Grid.Effect>
                                <BlurEffect Radius="50"/>
                            </Grid.Effect>
                        </Grid>
                        <Grid Background="Black" Width="300" Height="300">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.5*"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"/>
                                <RowDefinition/>
                                <RowDefinition Height="40"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="ProfileName: " Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            <TextBox Text="{Binding ProfileName}" Grid.Column="1" Margin="10"/>
                            <Button Name="btnAddProfileImage" Content="Đổi Hình" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" Grid.Row="1" BorderBrush="Gray" BorderThickness="2"
                                    Background="Black" Command="ApplicationCommands.Open"/>
                            <Border Grid.Column="1" Grid.Row="1" Margin="20" BorderBrush="Gray" BorderThickness="1"/>
                            <Image Name="imageAddProfile" Source="{Binding Hinh,Mode=TwoWay}" Grid.Column="1" Grid.Row="1" Margin="20" Stretch="Fill"/>
                            <TextBlock IsHitTestVisible="True"  Text="{Binding ElementName=imageAddProfile,Path=Source}" Grid.Column="1" Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Center"
                                       Foreground="White"/>
                            <Button Name="btnAddProfile" Content="Add" Grid.Row="2" Grid.Column="1" BorderThickness="2" Foreground="White" BorderBrush="Gray" Background="Black" Margin="10" HorizontalAlignment="Center" Click="btnAddProfile_Click"/>
                        </Grid>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem Name="tabQuanLyUser9" Background="#FF3D1C1C" Visibility="Collapsed">
                <Grid Margin="10"  >
                    <Grid.Resources>
                        <Style TargetType="Button" BasedOn="{StaticResource btnManage}"/>
                    </Grid.Resources>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="40"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Mode: " Foreground="Red" FontSize="20" Margin="5"/>
                    <ComboBox Name="cbModeUser" Height="25" VerticalAlignment="Top" Width="100" HorizontalAlignment="Left" Margin="70,5" SelectedIndex="0"  SelectionChanged="cbModeUser_SelectionChanged">
                        <ComboBoxItem Content="Searching"/>
                        <ComboBoxItem Content="Adding"/>
                    </ComboBox>
                    <Grid Margin="0,40,0,0" Name="gridUser">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width=".7*"/>
                            <ColumnDefinition/>
                            <ColumnDefinition Width=".7*"/>
                            <ColumnDefinition/>
                            <ColumnDefinition Width=".7*"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition />
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.Resources>
                            <Style TargetType="TextBlock">
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="VerticalAlignment" Value="Center" />
                                <Setter Property="HorizontalAlignment" Value="Right" />
                                <Setter Property="Margin" Value="10,0"/>
                            </Style>
                        </Grid.Resources>
                        <TextBlock Text="UserName:"/>
                        <TextBlock Grid.Column="2" Text="Loại Tài Khoản:" Grid.Row="2"/>
                        <TextBlock Grid.Row="2" Text="Cấp Độ:"/>
                        <TextBlock Grid.Column="2" Text="Email:"/>
                        <TextBlock Text="Phone:" Grid.Column="4"/>
                        <TextBlock Text="Thanh Toán:" Grid.Column="4" Grid.Row="2"/>
                        <Grid Grid.Row="1" Grid.ColumnSpan="10" Name="gridAddUserMode"  Visibility="Collapsed" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width=".7*"/>
                                <ColumnDefinition/>
                                <ColumnDefinition Width=".7*"/>
                                <ColumnDefinition />
                                <ColumnDefinition Width=".7*"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Password:" />
                            <TextBlock Text="Hinh:" Grid.Column="2" />
                            <Border Width="200" Height="100" Margin="10,5" Grid.Column="3" BorderBrush="WhiteSmoke" BorderThickness="1">
                                <Image Name="imgUser" Source="{Binding Hinh,UpdateSourceTrigger=PropertyChanged}"  Stretch="Fill" />
                            </Border>
                            <TextBlock Name="tbAddImage" Text="{Binding Hinh,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Grid.ColumnSpan="4" Foreground="Gray" 
                                       Margin="0,10,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom">
                            </TextBlock>
                            <Button Content="Chọn hình" Grid.Column="4"  HorizontalAlignment="Left" Height="30" Margin="10" Command="ApplicationCommands.Open"/>
                            <TextBox Name="tbPassword"  Text="{Binding Password}" Grid.Column="1"  Margin="3" Height="25"/>
                        </Grid>
                        <TextBox Name="tbUserName" Grid.Column="1" Margin="3"  >
                            <TextBox.Text>
                                <Binding Path="Name" UpdateSourceTrigger="LostFocus">
                                    <Binding.ValidationRules>
                                        <v:UsernameValidation length="6" type="signup"/>
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                        </TextBox>
                        <ComboBox Name="cbCapDo" Grid.Column="1" Grid.Row="2" Margin="3" SelectedValue="{Binding MaCapDo,Mode=TwoWay}" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=CapDo}" DisplayMemberPath="Name" SelectedValuePath="ID"/>
                        <ComboBox Name="cbLoaiTaiKhoan" Grid.Column="3" Grid.Row="2" Margin="3" SelectedValue="{Binding isCheckLoai,Mode=TwoWay}" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=LoaiTaiKhoan}" DisplayMemberPath="Name" SelectedValuePath="ID"/>
                        <TextBox Name="tbEmail" Grid.Column="3" Margin="3"  >
                            <TextBox.Text>
                                <Binding Path="Email" UpdateSourceTrigger="LostFocus">
                                    <Binding.ValidationRules>
                                        <v:EmailValidation regex=".@(gmail|yahoo)\.com" Msg="Email chưa hợp lệ"/>
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                        </TextBox>
                        <TextBox Name="tbPhone" Grid.Column="5" Margin="3" >
                            <TextBox.Text>
                                <Binding Path="Phone" UpdateSourceTrigger="LostFocus">
                                    <Binding.ValidationRules>
                                        <v:PhoneValidation  regex="\d{10,11}" Msg="Phone không hợp lệ! Phải từ 10-11 kí tự số"/>
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                        </TextBox>
                        <ComboBox Name="cbTT" Grid.Column="5" Margin="3" Grid.Row="2" SelectedValue="{Binding ThanhToan,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=TinhTrang}" DisplayMemberPath="TinhTrang" SelectedValuePath="ID"/>
                    </Grid>
                    <CheckBox Name="ckbFill" Content="Fill Selected" Foreground="WhiteSmoke"  Grid.Row="1" HorizontalAlignment="Left" Margin="30,10" Visibility="{Binding ElementName=gridAddUserMode,Path=Visibility}"/>
                    <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">

                        <Button Name="btnClear" Width="50"  Content="Clear" Margin="10,0" Click="btnClear_Click"/>
                        <Button Name="btnManageUserSearch" Width="50" Content="Search" Margin="10,0" Click="btnManageUserSearch_Click"/>
                        <Button Name="btnAddNewUser" Width="70" Content="Add New" Visibility="Collapsed" Margin="10,0" Click="btnAddNewUser_Click"/>
                    </StackPanel>
                    <DataGrid Name="dtgUser" Grid.Row="2" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=Users,UpdateSourceTrigger=PropertyChanged}" CanUserAddRows="True" AutoGenerateColumns="False"
                              ColumnWidth="*" Background="Black" BorderBrush="Red" SelectionChanged="dtgUser_SelectionChanged" ColumnHeaderStyle="{StaticResource dtgheaderstyle}"
                              CellStyle="{StaticResource dtgCellstyle}">

                        <DataGrid.Resources>

                            <Style TargetType="DataGridRow">
                                <Style.Resources>
                                    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="YellowGreen"/>
                                </Style.Resources>
                            </Style>
                        </DataGrid.Resources>
                        <DataGrid.RowDetailsTemplate>
                            <DataTemplate >
                                <Grid Background="#FF402424">
                                    <GroupBox Header="Thông tin thanh toán" Grid.Row="2"  Foreground="White" FontSize="12" FontWeight="Bold" BorderBrush="Red" BorderThickness="0.5">
                                        <DataGrid Name="dtgLSTT" ItemsSource="{Binding UserThanhToan}" Margin="10"  AutoGenerateColumns="False"   RowBackground="#FF402424"
                                   Background="#FF402424" CellStyle="{StaticResource dtgCellstyle}" ColumnHeaderStyle="{StaticResource dtgheaderstyle}">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Cấp Độ" Binding="{Binding CapDo}" IsReadOnly="True" />
                                                <DataGridTextColumn Header="Ngày Thanh Toán" Binding="{Binding NgayTT}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="Ngày Kết Thúc" Binding="{Binding NgayKT}" IsReadOnly="True"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </GroupBox>
                                </Grid>
                            </DataTemplate>
                        </DataGrid.RowDetailsTemplate>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding ID}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="Password" Binding="{Binding Password}" IsReadOnly="True"/>
                            <DataGridComboBoxColumn Header="Cấp Độ" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=CapDo}" SelectedValueBinding="{Binding MaCapDo,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="ID" DisplayMemberPath="Name"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding Email,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                            <DataGridTextColumn Header="Phone" Binding="{Binding Phone,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                            <DataGridComboBoxColumn Header="Loại Tài Khoản" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=LoaiTaiKhoan}" SelectedValueBinding="{Binding isCheckLoai,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Name" SelectedValuePath="ID"/>
                            <DataGridTextColumn Header="Hình" Binding="{Binding Hinh,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                                <DataGridTextColumn.EditingElementStyle>
                                    <Style TargetType="TextBox">
                                        <Style.Triggers>
                                            <Trigger Property="IsFocused" Value="True">
                                                <Setter Property="TextWrapping" Value="Wrap"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGridTextColumn.EditingElementStyle>
                            </DataGridTextColumn>
                            <DataGridComboBoxColumn Header="Thanh Toán" IsReadOnly="True" ItemsSource="{Binding Source={StaticResource DBUser4Search},Path=TinhTrang}" SelectedValueBinding="{Binding ThanhToan,UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="ID" DisplayMemberPath="TinhTrang"/>
                            <DataGridTemplateColumn Header="Action">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Button Name="btnupdateUser" Content="Update" Click="btnupdateUser_Click"/>
                                            <Button Name="btndeleteUser" Content="Delete" Click="btndeleteUser_Click"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
            <TabItem Name="tabQuanLyVideo10" Visibility="Collapsed">
                <Grid DataContext="{Binding Source={StaticResource DBVideo4Search}}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="120"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.Resources>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="VerticalAlignment" Value="Center" />
                            <Setter Property="HorizontalAlignment" Value="Right" />
                            <Setter Property="Margin" Value="10,0"/>
                        </Style>
                        <Style  TargetType="Button" BasedOn="{StaticResource btnManage}"/>
                    </Grid.Resources>
                    <Grid >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width=".7*"/>
                            <ColumnDefinition/>
                            <ColumnDefinition Width=".7*"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="Name: "/>
                        <TextBlock Text="Category: " Grid.Row="1"/>
                        <TextBlock Text="Rating: " Grid.Row="2"/>
                        <TextBlock Text="Released Year: " Grid.Column="2"/>
                        <TextBlock Text="Updated Date: " Grid.Column="2" Grid.Row="1"/>
                        <TextBlock Text="Views: " Grid.Column="2" Grid.Row="2"/>
                        <TextBox Name="tbNameVideo" Grid.Column="1" Margin="10"/>
                        <ComboBox Name="cbCategory" Grid.Column="1" Grid.Row="1" Margin="10" ItemsSource="{Binding Cats}" SelectedValuePath="ID" DisplayMemberPath="Name"/>
                        <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="2" VerticalAlignment="Center" Margin="10">
                            <TextBox Name="tbMinRate" MinWidth="50"/>
                            <TextBlock Text=" to "/>
                            <TextBox Name="tbMaxRate" MinWidth="50"/>
                        </StackPanel>
                        <ComboBox Name="cbReleased" Grid.Column="3" Margin="10" ItemsSource="{Binding VideoReleased}" DisplayMemberPath="ReleaseDate" SelectedValuePath="ReleaseDate"/>
                        <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="1" VerticalAlignment="Center" Margin="10,5">
                            <DatePicker Name="dpkMin" />
                            <TextBlock Text=" to "/>
                            <DatePicker Name="dpkMax"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="2" VerticalAlignment="Center" Margin="10">
                            <TextBox Name="tbMinViews" MinWidth="50"/>
                            <TextBlock Text=" to "/>
                            <TextBox Name="tbMaxViews" MinWidth="50"/>
                        </StackPanel>
                    </Grid>


                    <!-- 1990-->
                    <CheckBox Grid.Row="1" Name="cbSelectShowDetail" Content="Visible When Selected" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="10,0" Checked="cbSelectShowDetail_Checked" Unchecked="cbSelectShowDetail_Unchecked"/>
                    <StackPanel Orientation="Horizontal" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Button Content="Clear" Margin="10,0" Click="btnClear_Click"/>
                        <Button Content="Search" Margin="10,0" Click="btnManageVideoSearch_Click"/>
                        <Button Grid.Row="1" Name="btnChonLink" Content="Chọn Link" HorizontalAlignment="Right" Margin="20,0" Click="btnChonLink_Click"/>
                    </StackPanel>
                    <DataGrid Name="dtgVideo" Grid.Row="2" ItemsSource="{Binding LstPhim,UpdateSourceTrigger=PropertyChanged}" AutoGenerateColumns="False" AlternatingRowBackground="AliceBlue" 
                              AlternationCount="2" AddingNewItem="dtgVideo_AddingNewItem" ColumnWidth="*" Background="Black" Margin="10" RowDetailsVisibilityMode="Visible"
                              SelectionUnit="CellOrRowHeader" RowEditEnding="dtgVideo_RowEditEnding" ColumnHeaderStyle="{StaticResource dtgheaderstyle}" CellStyle="{StaticResource dtgCellstyle}">
                        <DataGrid.Resources>
                            <Style x:Key="tbediting" TargetType="TextBox">
                                <Setter Property="TextWrapping" Value="Wrap"/>
                            </Style>
                        </DataGrid.Resources>
                        <DataGrid.RowDetailsTemplate>
                            <DataTemplate>
                                <Grid Background="#FF402424">
                                    <TabControl Name="tabctManageVideo" Background="#FF402424" Margin="35" >
                                        <TabControl.Resources>

                                        </TabControl.Resources>
                                        <TabItem Header="Update" Foreground="White" Background="#FF402424" Template="{DynamicResource tabitem}">
                                            <TabItem.Resources>
                                                <SolidColorBrush x:Key="AccentColorBrush" Color="SteelBlue"/>
                                                <SolidColorBrush x:Key="HighlightBrush" Color="SteelBlue"/>
                                            </TabItem.Resources>
                                            <Grid >
                                                <Grid.RowDefinitions>
                                                    <RowDefinition/>
                                                    <RowDefinition/>
                                                    <RowDefinition/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="0.7*"/>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="0.7*"/>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="0.7*"/>
                                                    <ColumnDefinition Width="200"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.Resources>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Foreground" Value="White"/>
                                                        <Setter Property="VerticalAlignment" Value="Center" />
                                                        <Setter Property="HorizontalAlignment" Value="Right" />
                                                        <Setter Property="Margin" Value="10,0"/>
                                                    </Style>
                                                    <Style  TargetType="Button" BasedOn="{StaticResource btnManage}"/>
                                                </Grid.Resources>
                                                <TextBlock Text="Name: " Grid.Column="2"/>
                                                <TextBlock Text="Nội Dung: " />
                                                <TextBlock Text="Category: " Grid.Column="4" Grid.Row="2"/>
                                                <TextBlock Text="Thời Gian: " Grid.Column="4"/>
                                                <TextBlock Text="Released Date: " Grid.Column="2" Grid.Row="1"/>
                                                <TextBlock Text="Rating: " Grid.Column="4" Grid.Row="1"/>
                                                <TextBlock Text="Views: " Grid.Column="2" Grid.Row="2"/>
                                                <TextBlock Text="Trailer: " Grid.Row="3"/>
                                                <TextBlock Text="Film: " Grid.Row="3" Grid.Column="3"/>
                                                <TextBlock Text="Hình: " Grid.Row="4"/>
                                                <TextBlock Text="Logo: " Grid.Row="4" Grid.Column="3"/>
                                                <TextBox Text="{Binding Name,UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Margin="5" VerticalAlignment="Center"/>
                                                <TextBox Text="{Binding NoiDung,UpdateSourceTrigger=PropertyChanged}" Grid.Column="1"  TextWrapping="Wrap" Grid.RowSpan="3" Margin="5"/>
                                                <TextBox Text="{Binding Category,UpdateSourceTrigger=PropertyChanged}" Grid.Column="5" Grid.Row="2" Margin="5" VerticalAlignment="Center"/>
                                                <TextBox Text="{Binding ThoiGian,UpdateSourceTrigger=PropertyChanged}" Grid.Column="5" Margin="5" VerticalAlignment="Center"/>
                                                <TextBox Text="{Binding ReleaseDate,UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Grid.Row="1" Margin="5" VerticalAlignment="Center"/>
                                                <TextBox Text="{Binding RatingIMDB,UpdateSourceTrigger=PropertyChanged}" Grid.Column="5" Grid.Row="1" Margin="5" VerticalAlignment="Center"/>
                                                <TextBox Text="{Binding Views,UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Grid.Row="2" Margin="5" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1" Grid.Row="3" Height="100" Margin="5">
                                                    <MediaElement Name="trailer" Tag="{Binding ElementName=slidertrailer}"  Source="{Binding Trailer,UpdateSourceTrigger=PropertyChanged}" Stretch="Fill" LoadedBehavior="Manual" MouseLeftButtonUp="ManageMediaElement_MouseLeftButtonUp"/>
                                                    <Slider Name="slidertrailer" IsMoveToPointEnabled="True" Minimum="0" Tag="{Binding ElementName=trailer}" VerticalAlignment="Bottom" Style="{StaticResource Horizontal_Slider}"
                                                PreviewMouseLeftButtonUp="slidertrailer_PreviewMouseLeftButtonUp"/>
                                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Left">
                                                        <TextBlock Name="progress" FontSize="7" Foreground="White"/>
                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right">
                                                        <TextBlock Name="tbwidthtrailer"  FontSize="7" Foreground="White" Margin="0"/>
                                                        <TextBlock Text="x" Foreground="White" Margin="0"/>
                                                        <TextBlock Name="tbheighttrailer"  FontSize="7" Foreground="White" Margin="0"/>
                                                    </StackPanel>
                                                </Grid>
                                                <StackPanel DataContext="{Binding ElementName=trailer}" HorizontalAlignment="Left" Margin="20" VerticalAlignment="Center" Grid.Column="2" Grid.Row="3">
                                                    <Button Content="Play" Margin="5" Click="playVideo_Click"/>
                                                    <Button Content="Pause" Margin="5" Click="pauseVideo_Click"/>
                                                    <Button Content="Stop" Margin="5" Click="stopVideo_Click"/>
                                                </StackPanel>
                                                <StackPanel DataContext="{Binding ElementName=Film}" HorizontalAlignment="Left" Margin="20" VerticalAlignment="Center" Grid.Column="5" Grid.Row="3">
                                                    <Button Content="Play" Margin="5" Click="playVideo_Click"/>
                                                    <Button Content="Pause" Margin="5" Click="pauseVideo_Click"/>
                                                    <Button Content="Stop" Margin="5" Click="stopVideo_Click"/>
                                                </StackPanel>
                                                <Grid Grid.Column="4" Grid.Row="3" Height="100" Margin="5">
                                                    <MediaElement Name="Film" Tag="{Binding ElementName=sliderfilm}" Position="1"  Height="100" Source="{Binding Linkfilm,UpdateSourceTrigger=PropertyChanged}" Stretch="Fill" LoadedBehavior="Manual" MouseLeftButtonDown="ManageMediaElement_MouseLeftButtonUp" Margin="5"/>
                                                    <Slider Name="sliderfilm"  Minimum="0" IsMoveToPointEnabled="True" Tag="{Binding ElementName=Film}" PreviewMouseLeftButtonUp="slidertrailer_PreviewMouseLeftButtonUp"
                                                VerticalAlignment="Bottom" Style="{StaticResource Horizontal_Slider}"/>
                                                </Grid>
                                                <Image Source="{Binding Hinh,UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Grid.Row="4" Height="100" MinWidth="200"/>
                                                <Image Source="{Binding Logo,UpdateSourceTrigger=PropertyChanged}" Grid.Column="4" Grid.Row="4" Height="100" MinWidth="200"/>
                                            </Grid>
                                        </TabItem>
                                        <TabItem Header="List Thể Loại" Foreground="White" Background="#FF402424" Template="{DynamicResource tabitem}">
                                            <StackPanel >
                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <ComboBox Name="cbAddCatVideo" ItemsSource="{Binding Source={StaticResource DBVideo4Search},Path=Cats}" Width="100" DisplayMemberPath="Name" SelectedValuePath="ID" Tag="{Binding ElementName=dtg}" Margin="10,0"/>
                                                    <Button Name="btnAddNewVideoCat" Content="Add" Click="btnAddNewVideoCat_Click" Tag="{Binding ElementName=cbAddCatVideo}" Margin="10,0"/>
                                                    <Button Name="btnDeleteCatVideo" Content="Delete" Margin="5,0" Click="btnDeleteCatVideo_Click" Tag="{Binding ElementName=dtg}"/>
                                                </StackPanel>
                                                <DataGrid Name="dtg" Margin="10" ItemsSource="{Binding TheLoai1,UpdateSourceTrigger=PropertyChanged}"  ColumnHeaderStyle="{StaticResource dtgheaderstyle}"
                                                  AutoGenerateColumns="False" CellStyle="{StaticResource dtgCellstyle}" RowBackground="#FF402424" ColumnWidth="*"  Background="#FF402424">
                                                    <DataGrid.Columns>
                                                        <DataGridTextColumn Header="ID" IsReadOnly="True" Binding="{Binding ID}" Width="Auto"/>
                                                        <DataGridComboBoxColumn Header="Name" IsReadOnly="True"  ItemsSource="{Binding Source={StaticResource DBVideo4Search},Path=Cats}" Width="Auto"
                                                                        SelectedValuePath="ID" SelectedValueBinding="{Binding ID,UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Name"/>
                                                    </DataGrid.Columns>
                                                </DataGrid>
                                            </StackPanel>
                                        </TabItem>
                                    </TabControl>
                                    <ComboBox Name="cbPhimRowDetail" SelectionChanged="cbPhimRowDetail_SelectionChanged" Tag="{Binding ElementName=tabctManageVideo}" SelectedIndex="0"
                                              VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10">
                                        <ComboBoxItem Content="Updating"/>
                                        <ComboBoxItem Content="List The Loai"/>
                                    </ComboBox>
                                </Grid>
                            </DataTemplate>
                        </DataGrid.RowDetailsTemplate>
                        <!--2117-->
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding ID,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True" Width="Auto"/>
                            <DataGridTextColumn Header="Name" Binding="{Binding Name,UpdateSourceTrigger=PropertyChanged}" Width="Auto"/>
                            <DataGridComboBoxColumn  Header="Thể loại" ItemsSource="{Binding Source={StaticResource DBVideo4Search},Path=Cats,UpdateSourceTrigger=PropertyChanged}" Width="Auto" SelectedValuePath="ID" DisplayMemberPath="Name" 
                                                     SelectedValueBinding="{Binding Category,UpdateSourceTrigger=PropertyChanged}"/>
                            <DataGridTextColumn Header="Nội Dung" Binding="{Binding NoiDung,UpdateSourceTrigger=PropertyChanged}" EditingElementStyle="{StaticResource tbediting}"/>
                            <DataGridTextColumn Header="Thời Gian" Binding="{Binding ThoiGian,UpdateSourceTrigger=PropertyChanged}" Width="Auto"/>
                            <DataGridTextColumn Header="Trailer" Binding="{Binding Trailer,UpdateSourceTrigger=PropertyChanged}" EditingElementStyle="{StaticResource tbediting}"/>
                            <DataGridTextColumn Header="Hình" Binding="{Binding Hinh,UpdateSourceTrigger=PropertyChanged}" EditingElementStyle="{StaticResource tbediting}"/>
                            <DataGridTextColumn Header="Link Film" Binding="{Binding Linkfilm,UpdateSourceTrigger=PropertyChanged}"  EditingElementStyle="{StaticResource tbediting}"/>
                            <DataGridTextColumn Header="Logo" Binding="{Binding Logo,UpdateSourceTrigger=PropertyChanged}"  EditingElementStyle="{StaticResource tbediting}"/>
                            <DataGridTextColumn Header="Rating" Binding="{Binding RatingIMDB,UpdateSourceTrigger=PropertyChanged}" Width="Auto"/>
                            <DataGridTextColumn Header="ReleaseDate" Binding="{Binding ReleaseDate,UpdateSourceTrigger=PropertyChanged}" Width="Auto"/>
                            <DataGridTextColumn Header="Views" Binding="{Binding Views,UpdateSourceTrigger=PropertyChanged}" Width="Auto"/>
                            <DataGridTemplateColumn Header="Ngày Cập Nhật" Width="Auto">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding NgayCapNhat,UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <DatePicker SelectedDate="{Binding NgayCapNhat,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" DisplayDateEnd="2021/1/1" SelectedDateFormat="Short"
                                                    DisplayDateStart="1980/1/1"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Action">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <Button Name="btnUpdateVideo" Tag="{Binding }" Content="Update" Click="btnUpdateVideo_Click" Margin="5,0"/>
                                            <Button Name="btnDeleteVideo" Tag="{Binding }" Content="Delete" Click="btnDeleteVideo_Click" Margin="5,0"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
            <TabItem Name="tabThongKe11" Visibility="Collapsed">
                <Grid>
                    <Grid.Resources>
                        <Style TargetType="Button">
                            <Setter Property="Padding" Value="3"/>
                            <Setter Property="VerticalAlignment" Value="Bottom"/>
                            <Setter Property="Background" Value="Black"/>
                            <Setter Property="BorderBrush" Value="Gray"/>
                            <Setter Property="BorderThickness" Value="2"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Foreground" Value="Red"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Grid.Resources>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Mode: " Foreground="Red" FontSize="15"/>
                        <ComboBox Name="cbModeTK" Height="25" SelectedIndex="0" VerticalAlignment="Top" MinWidth="80" SelectionChanged="cbModeTK_SelectionChanged">
                            <ComboBoxItem Content="Thống kê từng loại"/>
                            <ComboBoxItem Content="Thống kê nhiều cùng lúc"/>
                        </ComboBox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Thống kê theo: " Foreground="Red" FontSize="15" Margin="210,0,0,0"/>
                        <ComboBox Name="cbTKeTheo" Height="25" Width="100" SelectedIndex="0" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,0,0,120" SelectionChanged="cbTKeTheo_SelectionChanged">
                            <ComboBoxItem Content="Views"/>
                            <ComboBoxItem Content="RatingIMDB"/>
                            <ComboBoxItem Content="ReleaseDate"/>
                            <ComboBoxItem Content="ThoiLuong"/>
                            <ComboBoxItem Content="SoLuotThich"/>
                            <ComboBoxItem Content="SoTheLoai"/>
                        </ComboBox>
                        <StackPanel Name="stModeTKNhieu" Orientation="Horizontal" Visibility="Collapsed">
                            <Button Name="btnAddTK" Content="Add"  VerticalAlignment="Top" Margin="10,0" Click="btnAddTK_Click"/>
                            <TextBlock Text="Đã thêm: " FontSize="15" Foreground="Red" Margin="10,0"/>
                            <ComboBox Name="cbTKDaThem" Height="25" VerticalAlignment="Top" MinWidth="100" Margin="10,0" DisplayMemberPath="ValueMember"/>
                            <Button Name="btnDelteTK" Content="Delete" VerticalAlignment="Top" Click="btnDelteTK_Click"/>
                        </StackPanel>
                    </StackPanel>
                    <ComboBox Name="cbChart" ItemsSource="{Binding Source={StaticResource mainformprovider},Path=LstChart}" VerticalAlignment="Top" MinWidth="100" Height="30" HorizontalAlignment="Right"
                              DisplayMemberPath="Name" SelectionChanged="cbChart_SelectionChanged"/>

                    <ScrollViewer Margin="50">
                        <Grid Name="gridChart" Margin="50,0">
                            <chart:StackedColumnChart Name="chart" ChartSubTitle="Thống kê Video " Grid.Row="1" Foreground="Gray"
                ChartTitle="Thống Kê Video Yêu Thích"  ChartBackground="#FF4E4848"  Background="#FF2F2828" >
                                <chart:StackedColumnChart.Series>
                                    <chart:ChartSeries DisplayMember="Name" Name="chartseries" Caption="Views"
                            ItemsSource="{Binding .}"
                            ValueMember="Views" />
                                </chart:StackedColumnChart.Series>
                            </chart:StackedColumnChart>
                        </Grid>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            <TabItem Name="tabQuanLyTheLoai12" Visibility="Collapsed">
                <Grid DataContext="{Binding Source={StaticResource mainformprovider}}">
                    <Grid.Resources>
                        <Style  TargetType="Button" BasedOn="{StaticResource btnManage}"/>
                    </Grid.Resources>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="40"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <GroupBox Header="Danh sách thể loại" Foreground="Red" BorderBrush="Red">
                        <DataGrid Name="dtgTheLoai"   AddingNewItem="dtgTheLoai_AddingNewItem" ItemsSource="{Binding TheLoai}" Background="#FF402424" SelectionChanged="dtgTheLoai_SelectionChanged"
                                  CellStyle="{StaticResource dtgCellstyle}" ColumnHeaderStyle="{StaticResource dtgheaderstyle}" ColumnWidth="*" AutoGenerateColumns="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding ID,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Name" Binding="{Binding Name,UpdateSourceTrigger=PropertyChanged}"/>
                                <DataGridTemplateColumn Header="Action">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Button Name="btnUpdateTheLoai" Content="Update" Margin="5,0" MinWidth="100" Click="btnUpdateTheLoai_Click"/>
                                                <Button Name="btnDeleteTheLoai" Content="Delete" Margin="5,0" MinWidth="100" Click="btnDeleteTheLoai_Click"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                    <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <ComboBox Name="cbPhimName" ItemsSource="{Binding LstPhimName}" MinWidth="120" Margin="10,0"/>
                        <Button Name="btnAddPhimTheLoai" Content="Add Phim" Click="btnAddPhimTheLoai_Click"/>
                    </StackPanel>
                    <GroupBox Name="grbDSPhim" Header="Danh sách phim" Grid.Row="2" Foreground="Red" BorderThickness="0">
                        <DataGrid Name="dtgPhimTheoTL" ItemsSource="{Binding ElementName=dtgTheLoai,Path=SelectedItem.Phim1,UpdateSourceTrigger=PropertyChanged}" CellStyle="{StaticResource dtgCellstyle}" 
                                  ColumnHeaderStyle="{StaticResource dtgheaderstyle}" ColumnWidth="*" AddingNewItem="dtgPhimTheoTL_AddingNewItem" AutoGenerateColumns="False" Background="#FF402424" CanUserAddRows="True">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding ID,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                <!--<DataGridComboBoxColumn Header="Name" ItemsSource="{Binding LstPhimName}" SelectedValueBinding="{Binding Name,UpdateSourceTrigger=PropertyChanged}" />-->
                                <DataGridTextColumn Header="Name" Binding="{Binding Name,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Nội dung" Binding="{Binding NoiDung,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                <DataGridTemplateColumn Header="Action">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <!--<Button Name="btnAddPhimTheLoai" Content="Add" Margin="5,0" MinWidth="100" Click="btnAddPhimTheLoai_Click"/>-->
                                                <Button Name="btnDeletePhimTheLoai" Content="Delete" Margin="5,0" MinWidth="100" Click="btnDeletePhimTheLoai_Click"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                </Grid>
            </TabItem>
            <TabItem Name="tabGioiThieu13" Visibility="Collapsed">
                <ScrollViewer>
                    <Grid>
                        <Grid.Resources>
                            <Style TargetType="Button">
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="Background" Value="Red"/>
                                <Setter Property="FontSize" Value="30"/>
                                <Setter Property="Padding" Value="5"/>
                                <Setter Property="Opacity" Value="0.8"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <Border Background="{TemplateBinding Background}" Height="50">
                                                <ContentPresenter Content="JOIN NOW" VerticalAlignment="Center" HorizontalAlignment="Center"  />
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <EventSetter Event="Click" Handler="button_Click2"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="1"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Resources>
                        <Grid.Background>
                            <ImageBrush ImageSource="C:\\ltudql1_17ck3_17\Images\Most-Googled-Movies-2017.png"/>
                        </Grid.Background>
                        <Border Background="Black" Opacity="0.8"/>
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="Welcome To Our Movies World" FontSize="40" HorizontalAlignment="Center" Foreground="White" FontWeight="Bold">
                                <TextBlock.Effect>
                                    <DropShadowEffect BlurRadius="10" ShadowDepth="10"/>
                                </TextBlock.Effect>
                            </TextBlock>
                            <TextBlock Text="WATCH ANYWHERE. CANCEL ANY TIME." Foreground="White" HorizontalAlignment="Center" FontSize="30" Margin="10"/>
                            <Button Content="JOIN NOW" Height="60" Width="550"/>
                            <Grid Width="{Binding ElementName=maintabcontrol,Path=ActualWidth}" VerticalAlignment="Bottom">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="180"/>
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Border BorderBrush="Gray" BorderThickness="0,0,0,2" Background="Transparent"/>
                                <Border Name="bdr" Background="Black" Grid.Row="1" Height="360"/>
                                <TabControl Name="tabgioit" Background="#FF402424" Grid.RowSpan="2" Width="{Binding ElementName=tabGioiThieu13,Path=Width}" Margin="70,100">
                                    <TabControl.Template>
                                        <ControlTemplate TargetType="{x:Type TabControl}">
                                            <Grid KeyboardNavigation.TabNavigation="Local">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <TabPanel x:Name="HeaderPanel" Grid.Row="0" Panel.ZIndex="1"  Margin="0,0,4,15" IsItemsHost="True" 
                                                      KeyboardNavigation.TabIndex="1"  Background="Transparent" />
                                                <Border x:Name="Border"  Grid.Row="1" BorderThickness="0" KeyboardNavigation.TabNavigation="Local" KeyboardNavigation.DirectionalNavigation="Contained"
                                         KeyboardNavigation.TabIndex="2">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="Black"/>
                                                    </Border.Background>
                                                    <ContentPresenter x:Name="PART_SelectedContentHost" Margin="4" ContentSource="SelectedContent" />
                                                </Border>
                                            </Grid>
                                        </ControlTemplate>
                                    </TabControl.Template>
                                    <TabControl.Resources>
                                        <Style TargetType="{x:Type TabItem}">
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="FontSize" Value="25"/>
                                            <Setter Property="Width" Value="350"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type TabItem}">
                                                        <StackPanel Name="st" Opacity="0.7">
                                                            <Image Source="C:\\ltudql1_17ck3_17\Icons\l.png" Height="30" Width="30"/>
                                                            <Border  Name="Border" BorderThickness="0" Margin="0,0,-4,0"   Height="50"  Background="{x:Null}" CornerRadius="2,12,0,0" >
                                                                <ContentPresenter x:Name="ContentSite"   VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header"
                                                         Margin="12,5,12,9" RecognizesAccessKey="True"/>
                                                            </Border>
                                                        </StackPanel>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsSelected" Value="True">
                                                                <Setter Property="Panel.ZIndex" Value="100" />
                                                                <Setter TargetName="Border" Property="BorderBrush" Value="Red" />
                                                                <Setter TargetName="Border" Property="BorderThickness" Value="0,0,0,7" />
                                                                <Setter TargetName="st" Property="Opacity" Value="1"/>
                                                            </Trigger>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="st" Property="Opacity" Value="1"/>
                                                            </Trigger>
                                                            <Trigger Property="IsEnabled" Value="False">
                                                                <Setter TargetName="Border" Property="Background" Value="Red" />
                                                                <Setter TargetName="Border" Property="BorderBrush" Value="Red" />
                                                                <Setter Property="Foreground" Value="White" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </TabControl.Resources>
                                    <TabItem Header="No commitments" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" >
                                        <StackPanel >
                                            <TextBlock FontSize="25" Foreground="White" Text="It's free for everyone. C'mon, let's join us" TextWrapping="Wrap" MaxWidth="600"/>
                                            <Button VerticalAlignment="Top" Margin="50" Height="50" Width="250"/>
                                        </StackPanel>
                                    </TabItem>
                                    <TabItem Header="Watch anywhere" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" >
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock FontSize="25" Foreground="White" Text="Watch TV shows and movies anytime, anywhere, personalized for you" TextWrapping="Wrap" MaxWidth="600"/>
                                            <Button VerticalAlignment="Top" Margin="50,0" Height="50" Width="250"/>
                                        </StackPanel>
                                    </TabItem>
                                    <TabItem Header="Pick your level" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" >
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock FontSize="25" Foreground="White" Text="Chose one level and watch evething on MyNetflix."/>
                                            <Button Height="60" Width="250" VerticalAlignment="Bottom" Margin="10"/>
                                            <StackPanel >
                                                <TextBlock Text="Basic: 30 days" Foreground="White"/>
                                                <TextBlock Text="Standard: 90 days" Foreground="White"/>
                                                <TextBlock Text="Premium: 120 days" Foreground="White"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </TabItem>
                                </TabControl>
                            </Grid>
                        </StackPanel>

                    </Grid>
                </ScrollViewer>
            </TabItem>
            <TabItem Name="tabThongKeDT14" Visibility="Collapsed">
                <Grid>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="5">
                        <TextBlock Text="Thống kê theo:  " FontSize="15" Margin="10" Foreground="Red"/>
                        <ComboBox Name="cbDoanhThu" MinWidth="100" Background="Black" Margin="0,0,50,0" Height="25" BorderBrush="Black" SelectionChanged="cbDoanhThu_SelectionChanged">
                            <ComboBox.Resources>
                                <Style TargetType="ComboBoxItem">
                                    <Setter Property="Background" Value="Black"/>
                                    <Setter Property="Foreground" Value="Red"/>
                                    <Setter Property="BorderBrush" Value="Black"/>
                                </Style>
                            </ComboBox.Resources>
                            <ComboBoxItem Content="Ngày trong tháng"/>
                            <ComboBoxItem Content="Tháng trong năm"/>
                            <ComboBoxItem Content="Quý trong năm"/>
                        </ComboBox>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="7" >
                            <TextBlock Name="txtChonThang" Text="Chọn Tháng: " Foreground="Red" FontSize="15" Margin="5" HorizontalAlignment="Right"/>
                            <ComboBox Name="cbChonTheoThang"  VerticalAlignment="Top" MinWidth="100" Height="25" HorizontalAlignment="Right"  Margin="0,0,100,0"
                                SelectionChanged="cbDoanhThu_SelectionChanged"/>
                            <TextBlock  Text="Chọn Năm: " Foreground="Red" FontSize="15" Margin="5"  HorizontalAlignment="Right"/>
                            <ComboBox Name="cbChonTheoNam"  VerticalAlignment="Top" MinWidth="100" Height="25" HorizontalAlignment="Right"  Margin="0,0,100,0"
                               SelectionChanged="cbDoanhThu_SelectionChanged"/>
                        </StackPanel>
                    </StackPanel>
                    <chart:PieChart Name="chartDT" ChartSubTitle="Thống kê Doanh thu " Grid.Row="1" Foreground="Gray"
                ChartTitle="Thống Kê Doanh thu"  ChartBackground="#FF4E4848"  Background="#FF2F2828" Margin="30">
                        <chart:PieChart.Series>
                            <chart:ChartSeries DisplayMember="Name" Name="chartseriesDT" Caption="Ngày"
                            ItemsSource="{Binding .}"
                            ValueMember="Value" />
                        </chart:PieChart.Series>
                    </chart:PieChart>
                </Grid>
            </TabItem>
        </TabControl>
        <DockPanel Grid.Row="1" Name="detailvideo" VerticalAlignment="Bottom"   Visibility="Collapsed" Height="{Binding ElementName=maintabcontrol,Path=ActualHeight}" DataContext="{Binding Source={StaticResource mainformprovider},Path=SelectedPhim}"
               Width="{Binding ElementName=maintabcontrol,Path=ActualWidth}"  LastChildFill="True">
                    <DockPanel.Style>
                        <Style TargetType="DockPanel">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Source={StaticResource mainformprovider},Path=SelectedPhim}" Value="{x:Null}">
                                    <DataTrigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty= "Opacity" From= "1" To= "0" Duration= "0:0:0.5" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty   = "Visibility">
                                                    <DiscreteObjectKeyFrame Value="{x:Static Visibility.Collapsed}" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.EnterActions>
                                    <DataTrigger.ExitActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty   = "Opacity" From="0" To= "1" BeginTime= "0:0:0" Duration= "0:0:0.5" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty   = "Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="{x:Static Visibility.Visible}" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.ExitActions>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>
                    <Grid Background="Black"  VerticalAlignment="Bottom" Grid.Row="1" DockPanel.Dock="Bottom"
                              Width="{Binding ElementName=maintabcontrol,Path=ActualWidth}">
                        <Grid.Height>
                            <MultiBinding Converter="{StaticResource griddetailheight}" UpdateSourceTrigger="PropertyChanged">
                                <Binding Path="IsFormCategory" Source="{StaticResource mainformprovider}"/>
                                <Binding Path="GridDetailHeight" Source="{StaticResource mainformprovider}"/>
                                <Binding Path="ActualHeight" ElementName="maintabcontrol"/>
                            </MultiBinding>
                        </Grid.Height>
                        <Image Source="{Binding Hinh}" HorizontalAlignment="Right"   Stretch="Fill" 
                       Width="{Binding ElementName=maincrollviewer,Path=ActualWidth,Converter={StaticResource imagedetailwidth}}">
                            <Image.Effect>
                                <BlurEffect Radius="30"/>
                            </Image.Effect>
                        </Image>
                        <Image Source="{Binding Hinh}" HorizontalAlignment="Right"  Stretch="Fill"
                       Width="{Binding ElementName=detailvideo,Path=ActualWidth,Converter={StaticResource imagedetailwidth}}">
                        </Image>
                        <Border Name="borderdetail" Background="Black" Opacity="0.8" HorizontalAlignment="Left" Width="{Binding ElementName=detailvideo,Path=ActualWidth,Converter={StaticResource borderdetailwidth}}" >
                            <Border.Effect>
                                <BlurEffect Radius="70"/>
                            </Border.Effect>
                        </Border>
                        <Grid VerticalAlignment="Top" HorizontalAlignment="Left" Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition MaxHeight="300" Height="*"/>
                                <RowDefinition Height="40"/>
                                <RowDefinition/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Image Source="{Binding Logo}" MinWidth="{Binding ElementName=borderdetail,Path=ActualWidth}" MinHeight="150" MaxWidth="{Binding ElementName=borderdetail,Path=ActualWidth}"/>
                            <StackPanel Orientation="Horizontal" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <Image Source="C:\\ltudql1_17ck3_17\Icons\clock.jpg" Width="25" Height="25" Stretch="Fill"  Margin="5" />
                                <TextBlock Foreground="White" FontSize="13" Text="{Binding ThoiGian}" VerticalAlignment="Center" Margin="5"/>
                                <TextBlock Foreground="White" FontSize="13" Text="Release: " VerticalAlignment="Center" Margin="10,0,0,0"/>
                                <TextBlock Foreground="White" FontSize="13" Text="{Binding ReleaseDate}" VerticalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <Border BorderBrush="Gray" Background="Black" BorderThickness="1" Margin="0,5">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="IMDB" Foreground="White" Margin="5"/>
                                        <TextBlock Text="{Binding RatingIMDB}" Margin="5" Foreground="White" FontWeight="Bold" FontSize="12"/>
                                    </StackPanel>
                                </Border>
                                <ItemsControl ItemsSource="{Binding TheLoai1}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <VirtualizingStackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate DataType="{x:Type local:TheLoai}">
                                            <Border BorderBrush="Gray" Background="Black" BorderThickness="1" Margin="5" MouseLeftButtonDown="gridChude_MouseLeftButtonDown" Tag="{Binding .}">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Name="tb" Text="{Binding Name}" Margin="5" Foreground="White" FontWeight="Bold" FontSize="12"/>
                                                </StackPanel>
                                            </Border>
                                            <DataTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="tb" Property="TextDecorations" Value="Underline"/>
                                                </Trigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                            <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left" Grid.Row="3" MaxWidth="500" Margin="0,10">
                                <TextBlock Text="Nội dung phim" Foreground="White" FontWeight="Bold" FontSize="17" Margin="0,10"/>
                                <TextBlock IsHitTestVisible="True" Text="{Binding NoiDung}"  TextWrapping="Wrap" Margin="0,5" >
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="Gray"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Grid.Row="4" >
                                <Button Name="btnToPlayVideo" Background="Red" Width="90" Click="btnToPlayVideo_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Grid>
                                                <Border Background="Teal" Width="{TemplateBinding Width}">
                                                    <Border.Effect>
                                                        <BlurEffect Radius="10"/>
                                                    </Border.Effect>
                                                </Border>
                                                <Border Name="bd" Background="{TemplateBinding Background}" Width="{TemplateBinding Width}" Padding="10">
                                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                        <Path Data="M 0,0 L 10,10 L 0,20 Z" Width="20" Height="20" Fill="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        <TextBlock Text="PLAY" FontSize="18" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="bd" Property="Background" Value="Brown"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Name="btnAddPlaylist" Background="Black" Margin="20,0" Padding="10" Click="btnAddPlaylist_Click" >
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Grid>
                                                <Border Background="Gray" Width="{TemplateBinding Width}">
                                                    <Border.Effect>
                                                        <BlurEffect Radius="10"/>
                                                    </Border.Effect>
                                                </Border>
                                                <Border  Width="{TemplateBinding Width}" Padding="10">
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="Black"/>
                                                        </Style>
                                                    </Border.Style>
                                                    <Border.Background>
                                                        <MultiBinding Converter="{StaticResource IsOnPlayListConvert}" UpdateSourceTrigger="PropertyChanged">
                                                            <Binding Source="{StaticResource mainformprovider}" Path="SelectedProfile" UpdateSourceTrigger="PropertyChanged"/>
                                                            <Binding  Path="ID" UpdateSourceTrigger="PropertyChanged"/>
                                                            <Binding />
                                                        </MultiBinding>
                                                    </Border.Background>
                                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                        <Path Name="path" Data="M 0,10 L 10,10 L 10,0 L 13,0 L 13,10 L 23,10 L 23,13 L 13,13 L 13,23 L 10,23 L 10,13 L 0,13 Z" 
                                                      Fill="White" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0"/>
                                                        <TextBlock Name="tb" Text="MY LIST" FontSize="18" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,0"/>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="path" Property="Fill" Value="Red"/>
                                                    <Setter TargetName="tb" Property="Foreground" Value="Red"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Grid>
                        <Button Name="btnDetailPhim" BorderThickness="0" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="10,10" Content="X" Style="{StaticResource btnstyle2}" Foreground="White"
                                    Background="{x:Null}" Click="btnDetailPhim_Click"  Focusable="True">
                            <Button.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard Name="FadeStoryboard">
                                        <Storyboard >
                                            <ColorAnimation Storyboard.TargetProperty="(TextBox.Foreground).(SolidColorBrush.Color)" To="Red" AutoReverse="True" RepeatBehavior="Forever" 
                                                    Duration="0:0:1" Storyboard.TargetName="btnDetailPhim"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Button.Triggers>
                        </Button>
                    </Grid>
                    <Border  Background="Black"   MouseLeftButtonDown="Border_MouseLeftButtonDown" Opacity="0.1" Width="{Binding ElementName=maintabcontrol,Path=ActualWidth}"/>
                </DockPanel>
                <Grid Name="gridMessage" Grid.RowSpan="2" IsHitTestVisible="False" MinHeight="90" MinWidth="200" Opacity="0" Background="Black" MaxHeight="150" MaxWidth="300" Visibility="Collapsed" >
                    <Border Width="{Binding ElementName=gridMessage,Path=ActualWidth}" Height="{Binding ElementName=gridMessage,Path=ActualHeight}" Background="Brown">
                        <Border.Effect>
                            <BlurEffect Radius="30"/>
                        </Border.Effect>
                    </Border>
                    <TextBlock  Name="tbMessage" Text="Tádasdasdasd" TextAlignment="Center" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White"   FontSize="20"  TextWrapping="Wrap"
                           Margin="10" />

                </Grid>
    </Grid>
</Window>
